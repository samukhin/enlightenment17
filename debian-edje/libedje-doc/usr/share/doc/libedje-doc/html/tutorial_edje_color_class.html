<html>
<head>
    <title>Edje Color Class example</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Edje Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="Edje__Edit_8h.html">Edje Edit API</a></li>
                <li><a href="Examples.html">Examples</a></li>
                <li><a href="luaref.html">LUA scripting</a></li>
                <li><a href="Edje_8h.html">Edje API</a></li>
                <li><a href="edcref.html">EDC Reference</a></li>
                <li><a href="pages.html">Releted Pages</a></li>
                <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Edje Color Class example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p></p>
<p>This example shows how to manipulate and change Color classes. In this example we will create two surfaces to show what happens when you change the color class at the process and object level.</p>
<p>It's a very simple example, there are two surfaces created from the same EDC, but just in one of them we will set a specific color class, although both will be affected by color class set at the process level as you will see.</p>
<p>It's important you know that all colors has the format R G B A. Just to be easier to understand this example, we will create a small set of colors that will be used along of the example. This piece of code is shown below: </p><div class="fragment"><div class="line"><span class="keyword">static</span> color colors_init_data[] =</div>
<div class="line">  {{255, 0, 0, 255},            <span class="comment">/* red */</span></div>
<div class="line">   {0, 255, 0, 255},            <span class="comment">/* green */</span></div>
<div class="line">   {0, 0, 255, 255},            <span class="comment">/* blue */</span></div>
<div class="line">   {0, 0, 0, 255},              <span class="comment">/* black */</span></div>
<div class="line">   {255, 255, 255, 255},        <span class="comment">/* white */</span></div>
<div class="line">   {128, 128, 128, 255},        <span class="comment">/* gray */</span></div>
<div class="line">   {255, 255, 0, 255},          <span class="comment">/* yellow */</span></div>
<div class="line">   {255, 0, 255, 255}           <span class="comment">/* pink */</span></div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *color_names[] =</div>
<div class="line">  {<span class="stringliteral">&quot;red&quot;</span>, <span class="stringliteral">&quot;green&quot;</span>, <span class="stringliteral">&quot;blue&quot;</span>, <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;white&quot;</span>,</div>
<div class="line">   <span class="stringliteral">&quot;gray&quot;</span>, <span class="stringliteral">&quot;yellow&quot;</span>, <span class="stringliteral">&quot;pink&quot;</span>};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> Eina_Bool</div>
<div class="line">_get_color_from_name(<span class="keyword">const</span> <span class="keywordtype">char</span> *n, color *c)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">int</span> i;</div>
<div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; 8; i++)</div>
<div class="line">     <span class="keywordflow">if</span> (!strcmp(n, color_names[i]))</div>
<div class="line">       {</div>
<div class="line">          (*c)[0] = (colors_init_data[i])[0];</div>
<div class="line">          (*c)[1] = (colors_init_data[i])[1];</div>
<div class="line">          (*c)[2] = (colors_init_data[i])[2];</div>
<div class="line">          (*c)[3] = (colors_init_data[i])[3];</div>
<div class="line">          <span class="keywordflow">return</span> EINA_TRUE;</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> EINA_FALSE;</div>
<div class="line">}</div>
</div><!-- fragment --><p> Focusing on the relevant parts of the code we go right to the part where we set the new color class. For that we will use the functions edje_color_class_set ( which will affect all edjes) and edje_object_color_class_set (which affects just the specific object). </p><div class="fragment"><div class="line">   <a class="code" href="Edje_8h.html#a5a0c4fc202cac763a722a08d4be536e4">edje_color_class_set</a>(argv[1],                     <span class="comment">/* class name   */</span></div>
<div class="line">                        c1[0], c1[1], c1[2], c1[3],  <span class="comment">/* Object color */</span></div>
<div class="line">                        c2[0], c2[1], c2[2], c2[3],  <span class="comment">/* Text outline */</span></div>
<div class="line">                        c3[0], c3[1], c3[2], c3[3]); <span class="comment">/* Text shadow  */</span></div>
<div class="ttc" id="aEdje_8h_html_a5a0c4fc202cac763a722a08d4be536e4"><div class="ttname"><a href="Edje_8h.html#a5a0c4fc202cac763a722a08d4be536e4">edje_color_class_set</a></div><div class="ttdeci">EAPI Eina_Bool edje_color_class_set(const char *color_class, int r, int g, int b, int a, int r2, int g2, int b2, int a2, int r3, int g3, int b3, int a3)</div><div class="ttdoc">Set Edje color class.</div><div class="ttdef"><b>Definition:</b> edje_util.c:487</div></div>
<div class="line"> </div>
<div class="line">   <span class="comment">/* Setting an arbitrary value just to see the difference between */</span></div>
<div class="line">   <span class="comment">/* process level and object level */</span></div>
<div class="line">   <a class="code" href="Edje_8h.html#a92f450d4d64970ad6114ac2533d1aad3">edje_object_color_class_set</a>(edje_obj2, argv[1], <span class="comment">/* class name   */</span></div>
<div class="line">                               128, 180, 77, 255,  <span class="comment">/* Object color */</span></div>
<div class="line">                               200, 22, 86, 255,   <span class="comment">/* Text outline */</span></div>
<div class="line">                               39, 90, 187, 255);  <span class="comment">/* Text shadow  */</span></div>
<div class="ttc" id="aEdje_8h_html_a92f450d4d64970ad6114ac2533d1aad3"><div class="ttname"><a href="Edje_8h.html#a92f450d4d64970ad6114ac2533d1aad3">edje_object_color_class_set</a></div><div class="ttdeci">EAPI Eina_Bool edje_object_color_class_set(Evas_Object *obj, const char *color_class, int r, int g, int b, int a, int r2, int g2, int b2, int a2, int r3, int g3, int b3, int a3)</div><div class="ttdoc">Sets the object color class.</div><div class="ttdef"><b>Definition:</b> edje_util.c:652</div></div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd><ul>
<li>argv[1] is the name of a color class used in the EDC.</li>
<li>The second and third colors only apply to text part.</li>
<li>The color class set for the object overrides the color previously set.</li>
</ul>
</dd></dl>
<p>After we have set the color class we will check the color classes, for that we created a function which prints all color classes and tries to get theirs values and print too.  </p><div class="fragment"><div class="line">_color_classes_print(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">   Eina_List *classes;</div>
<div class="line">   <span class="keywordtype">char</span> *class_name;</div>
<div class="line"> </div>
<div class="line">   fprintf(stdout, <span class="stringliteral">&quot;Getting the color classes\n\n&quot;</span>);</div>
<div class="line">   classes = <a class="code" href="Edje_8h.html#a5cbc17d95580c961a79de34860a4a538">edje_color_class_list</a>();</div>
<div class="line">   EINA_LIST_FREE(classes, class_name)</div>
<div class="line">     {</div>
<div class="line">        <span class="keywordtype">int</span> r1, r2, r3, g1, g2, g3, b1, b2, b3,</div>
<div class="line">          a1, a2, a3;</div>
<div class="line"> </div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;\ncolor class: %s\n&quot;</span>, class_name);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="Edje_8h.html#a6590495e0a102b0d72808143ce6de433">edje_color_class_get</a>(class_name, &amp;r1, &amp;g1, &amp;b1, &amp;a1,</div>
<div class="line">                                  &amp;r2, &amp;g2, &amp;b2, &amp;a2, &amp;r3, &amp;g3, &amp;b3, &amp;a3))</div>
<div class="line">          fprintf(stderr, <span class="stringliteral">&quot;Cannot get the color class\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          {</div>
<div class="line"> </div>
<div class="line">             fprintf(stdout,<span class="stringliteral">&quot;Object color r: %d g: %d b: %d a: %d\n&quot;</span>,</div>
<div class="line">                     r1, g1, b1, a1);</div>
<div class="line">             fprintf(stdout,<span class="stringliteral">&quot;Text outline color r: %d g: %d b: %d a: %d\n&quot;</span>,</div>
<div class="line">                     r2, g2, b2, a2);</div>
<div class="line">             fprintf(stdout,<span class="stringliteral">&quot;Text shadow color r: %d g: %d b: %d a: %d\n&quot;</span>,</div>
<div class="line">                     r3, g3, b3, a3);</div>
<div class="line">          }</div>
<div class="line">        free(class_name);</div>
<div class="ttc" id="aEdje_8h_html_a5cbc17d95580c961a79de34860a4a538"><div class="ttname"><a href="Edje_8h.html#a5cbc17d95580c961a79de34860a4a538">edje_color_class_list</a></div><div class="ttdeci">EAPI Eina_List * edje_color_class_list(void)</div><div class="ttdoc">Lists color classes.</div><div class="ttdef"><b>Definition:</b> edje_util.c:629</div></div>
<div class="ttc" id="aEdje_8h_html_a6590495e0a102b0d72808143ce6de433"><div class="ttname"><a href="Edje_8h.html#a6590495e0a102b0d72808143ce6de433">edje_color_class_get</a></div><div class="ttdeci">EAPI Eina_Bool edje_color_class_get(const char *color_class, int *r, int *g, int *b, int *a, int *r2, int *g2, int *b2, int *a2, int *r3, int *g3, int *b3, int *a3)</div><div class="ttdoc">Get Edje color class.</div><div class="ttdef"><b>Definition:</b> edje_util.c:561</div></div>
<div class="line">     }</div>
<div class="line">}</div>
</div><!-- fragment --><p> There are two other things that are worth mentioning, we added two callbacks for the objects, one for mouse down (that we use to delete the color class) and another for the signal emmited when a color class is deleted. </p><div class="fragment"><div class="line">   evas_object_event_callback_add(edje_obj1, EVAS_CALLBACK_MOUSE_DOWN,</div>
<div class="line">                                  _on_mouse_down, NULL);</div>
<div class="line">   <a class="code" href="Edje_8h.html#a92fe0c052c9f023a29cd04d0bbd542a7">edje_object_signal_callback_add</a>(edje_obj1, <span class="stringliteral">&quot;color_class,del&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>,</div>
<div class="line">                                   (<a class="code" href="Edje_8h.html#a54df542e812d8d08292a908819b559a8">Edje_Signal_Cb</a>) _color_class_callback_delete,</div>
<div class="line">                                   <span class="stringliteral">&quot;process&quot;</span>);</div>
<div class="ttc" id="aEdje_8h_html_a54df542e812d8d08292a908819b559a8"><div class="ttname"><a href="Edje_8h.html#a54df542e812d8d08292a908819b559a8">Edje_Signal_Cb</a></div><div class="ttdeci">void(* Edje_Signal_Cb)(void *data, Evas_Object *obj, const char *emission, const char *source)</div><div class="ttdoc">Edje signal callback functions's prototype definition.</div><div class="ttdef"><b>Definition:</b> Edje.h:898</div></div>
<div class="ttc" id="aEdje_8h_html_a92fe0c052c9f023a29cd04d0bbd542a7"><div class="ttname"><a href="Edje_8h.html#a92fe0c052c9f023a29cd04d0bbd542a7">edje_object_signal_callback_add</a></div><div class="ttdeci">EAPI void edje_object_signal_callback_add(Evas_Object *obj, const char *emission, const char *source, Edje_Signal_Cb func, void *data)</div><div class="ttdoc">Add a callback for an arriving Edje signal, emitted by a given Ejde object.</div></div>
</div><!-- fragment --><p> And then we delete the color class:  </p><div class="fragment"><div class="line">_on_mouse_down(<span class="keywordtype">void</span> *data __UNUSED__, Evas *e __UNUSED__, Evas_Object *obj, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   Evas_Event_Mouse_Down *ev = event_info;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (ev-&gt;button == 1)</div>
<div class="line">     {</div>
<div class="line">        <span class="keywordflow">if</span> (obj == edje_obj1)</div>
<div class="line">          <a class="code" href="Edje_8h.html#ad8dba94318c8f9502a7b045491594670">edje_color_class_del</a>(selected_class);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          <a class="code" href="Edje_8h.html#ac86d0117babf4446ac7d07c3f88baf08">edje_object_color_class_del</a>(edje_obj2, selected_class);</div>
<div class="line">     }</div>
<div class="ttc" id="aEdje_8h_html_ac86d0117babf4446ac7d07c3f88baf08"><div class="ttname"><a href="Edje_8h.html#ac86d0117babf4446ac7d07c3f88baf08">edje_object_color_class_del</a></div><div class="ttdeci">EAPI void edje_object_color_class_del(Evas_Object *obj, const char *color_class)</div><div class="ttdoc">Delete the object color class.</div><div class="ttdef"><b>Definition:</b> edje_util.c:780</div></div>
<div class="ttc" id="aEdje_8h_html_ad8dba94318c8f9502a7b045491594670"><div class="ttname"><a href="Edje_8h.html#ad8dba94318c8f9502a7b045491594670">edje_color_class_del</a></div><div class="ttdeci">EAPI void edje_color_class_del(const char *color_class)</div><div class="ttdoc">Delete edje color class.</div><div class="ttdef"><b>Definition:</b> edje_util.c:597</div></div>
</div><!-- fragment --><p> Our example will look like this, if you run with the parameters "green_class gray pink yellow":</p>
<div class="image">
<img src="edje-color-class-example.png" alt=""/>
</div>
<p>   <br  />
 </p><div class="image">
<img src="edje-color-class-example2.png" alt=""/>
</div>
  <p>The full source code follows: </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef HAVE_CONFIG_H</span></div>
<div class="line"><span class="preprocessor"># include &quot;config.h&quot;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"># define __UNUSED__</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;Ecore.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Ecore_Evas.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Edje_8h.html">Edje.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define WIDTH  (400)</span></div>
<div class="line"><span class="preprocessor">#define HEIGHT (400)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keywordtype">int</span> color[4];           <span class="comment">/* rgba */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> Ecore_Evas *ee1, *ee2;</div>
<div class="line"><span class="keyword">static</span> Evas *evas1, *evas2;</div>
<div class="line"><span class="keyword">static</span> Evas_Object *bg1, *edje_obj1, *bg2, *edje_obj2;</div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *selected_class;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> color colors_init_data[] =</div>
<div class="line">  {{255, 0, 0, 255},            <span class="comment">/* red */</span></div>
<div class="line">   {0, 255, 0, 255},            <span class="comment">/* green */</span></div>
<div class="line">   {0, 0, 255, 255},            <span class="comment">/* blue */</span></div>
<div class="line">   {0, 0, 0, 255},              <span class="comment">/* black */</span></div>
<div class="line">   {255, 255, 255, 255},        <span class="comment">/* white */</span></div>
<div class="line">   {128, 128, 128, 255},        <span class="comment">/* gray */</span></div>
<div class="line">   {255, 255, 0, 255},          <span class="comment">/* yellow */</span></div>
<div class="line">   {255, 0, 255, 255}           <span class="comment">/* pink */</span></div>
<div class="line">  };</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">char</span> *color_names[] =</div>
<div class="line">  {<span class="stringliteral">&quot;red&quot;</span>, <span class="stringliteral">&quot;green&quot;</span>, <span class="stringliteral">&quot;blue&quot;</span>, <span class="stringliteral">&quot;black&quot;</span>, <span class="stringliteral">&quot;white&quot;</span>,</div>
<div class="line">   <span class="stringliteral">&quot;gray&quot;</span>, <span class="stringliteral">&quot;yellow&quot;</span>, <span class="stringliteral">&quot;pink&quot;</span>};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> Eina_Bool</div>
<div class="line">_get_color_from_name(<span class="keyword">const</span> <span class="keywordtype">char</span> *n, color *c)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">int</span> i;</div>
<div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; 8; i++)</div>
<div class="line">     <span class="keywordflow">if</span> (!strcmp(n, color_names[i]))</div>
<div class="line">       {</div>
<div class="line">          (*c)[0] = (colors_init_data[i])[0];</div>
<div class="line">          (*c)[1] = (colors_init_data[i])[1];</div>
<div class="line">          (*c)[2] = (colors_init_data[i])[2];</div>
<div class="line">          (*c)[3] = (colors_init_data[i])[3];</div>
<div class="line">          <span class="keywordflow">return</span> EINA_TRUE;</div>
<div class="line">       }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> EINA_FALSE;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_color_classes_print(<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">   Eina_List *classes;</div>
<div class="line">   <span class="keywordtype">char</span> *class_name;</div>
<div class="line"> </div>
<div class="line">   fprintf(stdout, <span class="stringliteral">&quot;Getting the color classes\n\n&quot;</span>);</div>
<div class="line">   classes = <a class="code" href="Edje_8h.html#a5cbc17d95580c961a79de34860a4a538">edje_color_class_list</a>();</div>
<div class="line">   EINA_LIST_FREE(classes, class_name)</div>
<div class="line">     {</div>
<div class="line">        <span class="keywordtype">int</span> r1, r2, r3, g1, g2, g3, b1, b2, b3,</div>
<div class="line">          a1, a2, a3;</div>
<div class="line"> </div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;\ncolor class: %s\n&quot;</span>, class_name);</div>
<div class="line">        <span class="keywordflow">if</span> (!<a class="code" href="Edje_8h.html#a6590495e0a102b0d72808143ce6de433">edje_color_class_get</a>(class_name, &amp;r1, &amp;g1, &amp;b1, &amp;a1,</div>
<div class="line">                                  &amp;r2, &amp;g2, &amp;b2, &amp;a2, &amp;r3, &amp;g3, &amp;b3, &amp;a3))</div>
<div class="line">          fprintf(stderr, <span class="stringliteral">&quot;Cannot get the color class\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          {</div>
<div class="line"> </div>
<div class="line">             fprintf(stdout,<span class="stringliteral">&quot;Object color r: %d g: %d b: %d a: %d\n&quot;</span>,</div>
<div class="line">                     r1, g1, b1, a1);</div>
<div class="line">             fprintf(stdout,<span class="stringliteral">&quot;Text outline color r: %d g: %d b: %d a: %d\n&quot;</span>,</div>
<div class="line">                     r2, g2, b2, a2);</div>
<div class="line">             fprintf(stdout,<span class="stringliteral">&quot;Text shadow color r: %d g: %d b: %d a: %d\n&quot;</span>,</div>
<div class="line">                     r3, g3, b3, a3);</div>
<div class="line">          }</div>
<div class="line">        free(class_name);</div>
<div class="line">     }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_on_destroy(Ecore_Evas *ee __UNUSED__)</div>
<div class="line">{</div>
<div class="line">   ecore_main_loop_quit();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_on_mouse_down(<span class="keywordtype">void</span> *data __UNUSED__, Evas *e __UNUSED__, Evas_Object *obj, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   Evas_Event_Mouse_Down *ev = event_info;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (ev-&gt;button == 1)</div>
<div class="line">     {</div>
<div class="line">        <span class="keywordflow">if</span> (obj == edje_obj1)</div>
<div class="line">          <a class="code" href="Edje_8h.html#ad8dba94318c8f9502a7b045491594670">edje_color_class_del</a>(selected_class);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          <a class="code" href="Edje_8h.html#ac86d0117babf4446ac7d07c3f88baf08">edje_object_color_class_del</a>(edje_obj2, selected_class);</div>
<div class="line">     }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* here just to keep our example&#39;s window size</span></div>
<div class="line"><span class="comment"> * in synchrony. */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_canvas_resize_cb(Ecore_Evas *_ee)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">int</span> w, h;</div>
<div class="line"> </div>
<div class="line">   ecore_evas_geometry_get(_ee, NULL, NULL, &amp;w, &amp;h);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (_ee == ee1)</div>
<div class="line">     {</div>
<div class="line">        evas_object_resize(bg1, w, h);</div>
<div class="line">        evas_object_resize(edje_obj1, w, h);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span></div>
<div class="line">     {</div>
<div class="line">        evas_object_resize(bg2, w, h);</div>
<div class="line">        evas_object_resize(edje_obj2, w, h);</div>
<div class="line">     }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_color_class_callback_delete(<span class="keywordtype">void</span> *data, Evas *e __UNUSED__, Evas_Object *obj __UNUSED__,</div>
<div class="line">                             <span class="keyword">const</span> <span class="keywordtype">char</span> *emission, <span class="keywordtype">void</span> *source __UNUSED__)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordflow">if</span> (!strcmp(data, <span class="stringliteral">&quot;process&quot;</span>))</div>
<div class="line">     fprintf(stdout, <span class="stringliteral">&quot;Color class: %s deleted on process level\n&quot;</span>, emission);</div>
<div class="line">   <span class="keywordflow">else</span></div>
<div class="line">     fprintf(stdout, <span class="stringliteral">&quot;Color class: %s deleted on object level\n&quot;</span>, emission);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span></div>
<div class="line">_create_windows(<span class="keyword">const</span> <span class="keywordtype">char</span> *edje_file_path)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">/* this will give you a window with an Evas canvas under the first</span></div>
<div class="line"><span class="comment">    * engine available */</span></div>
<div class="line">   ee1 = ecore_evas_new(NULL, 0, 0, WIDTH, HEIGHT, NULL);</div>
<div class="line">   <span class="keywordflow">if</span> (!ee1)</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line">   ee2 = ecore_evas_new(NULL, 0, 0, WIDTH, HEIGHT, NULL);</div>
<div class="line">   <span class="keywordflow">if</span> (!ee2)</div>
<div class="line">     <span class="keywordflow">return</span> 0;</div>
<div class="line"> </div>
<div class="line">   ecore_evas_callback_destroy_set(ee1, _on_destroy);</div>
<div class="line">   ecore_evas_callback_resize_set(ee1, _canvas_resize_cb);</div>
<div class="line">   ecore_evas_title_set(ee1, <span class="stringliteral">&quot;Edje Color Class Example&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   ecore_evas_callback_destroy_set(ee2, _on_destroy);</div>
<div class="line">   ecore_evas_callback_resize_set(ee2, _canvas_resize_cb);</div>
<div class="line">   ecore_evas_title_set(ee2, <span class="stringliteral">&quot;Edje Object Color Class Example&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   evas1 = ecore_evas_get(ee1);</div>
<div class="line">   evas2 = ecore_evas_get(ee2);</div>
<div class="line"> </div>
<div class="line">   bg1 = evas_object_rectangle_add(evas1);</div>
<div class="line">   evas_object_color_set(bg1, 255, 255, 255, 255); <span class="comment">/* white bg */</span></div>
<div class="line">   evas_object_move(bg1, 0, 0);                    <span class="comment">/* at canvas&#39; origin */</span></div>
<div class="line">   evas_object_resize(bg1, WIDTH, HEIGHT);         <span class="comment">/* covers full canvas */</span></div>
<div class="line">   evas_object_show(bg1);</div>
<div class="line"> </div>
<div class="line">   bg2 = evas_object_rectangle_add(evas2);</div>
<div class="line">   evas_object_color_set(bg2, 255, 255, 255, 255); <span class="comment">/* white bg */</span></div>
<div class="line">   evas_object_move(bg2, 0, 0);                    <span class="comment">/* at canvas&#39; origin */</span></div>
<div class="line">   evas_object_resize(bg2, WIDTH, HEIGHT);         <span class="comment">/* covers full canvas */</span></div>
<div class="line">   evas_object_show(bg2);</div>
<div class="line"> </div>
<div class="line">   edje_obj1 = <a class="code" href="Edje_8h.html#a8cb00e5256fd50487f0669bc3bf9b8e0">edje_object_add</a>(evas1);</div>
<div class="line">   evas_object_event_callback_add(edje_obj1, EVAS_CALLBACK_MOUSE_DOWN,</div>
<div class="line">                                  _on_mouse_down, NULL);</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="Edje_8h.html#ab375d28c2726ccc32165b66b64abfc0a">edje_object_file_set</a>(edje_obj1, edje_file_path, <span class="stringliteral">&quot;example_color_class&quot;</span>);</div>
<div class="line">   evas_object_move(edje_obj1, 0, 0); <span class="comment">/* at canvas&#39; origin */</span></div>
<div class="line">   evas_object_resize(edje_obj1, WIDTH, HEIGHT);</div>
<div class="line">   <a class="code" href="Edje_8h.html#a9c06f3ce99e722e1cec2e9dc1bdb869e">edje_object_part_text_set</a>(edje_obj1, <span class="stringliteral">&quot;part_four&quot;</span>, <span class="stringliteral">&quot;EDJE EXAMPLE&quot;</span>);</div>
<div class="line">   <a class="code" href="Edje_8h.html#a92fe0c052c9f023a29cd04d0bbd542a7">edje_object_signal_callback_add</a>(edje_obj1, <span class="stringliteral">&quot;color_class,del&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>,</div>
<div class="line">                                   (<a class="code" href="Edje_8h.html#a54df542e812d8d08292a908819b559a8">Edje_Signal_Cb</a>) _color_class_callback_delete,</div>
<div class="line">                                   <span class="stringliteral">&quot;process&quot;</span>);</div>
<div class="line">   evas_object_show(edje_obj1);</div>
<div class="line"> </div>
<div class="line">   edje_obj2 = <a class="code" href="Edje_8h.html#a8cb00e5256fd50487f0669bc3bf9b8e0">edje_object_add</a>(evas2);</div>
<div class="line">   evas_object_event_callback_add(edje_obj2, EVAS_CALLBACK_MOUSE_DOWN,</div>
<div class="line">                                  _on_mouse_down, NULL);</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="Edje_8h.html#ab375d28c2726ccc32165b66b64abfc0a">edje_object_file_set</a>(edje_obj2, edje_file_path, <span class="stringliteral">&quot;example_color_class&quot;</span>);</div>
<div class="line">   evas_object_move(edje_obj2, 0, 0); <span class="comment">/* at canvas&#39; origin */</span></div>
<div class="line">   evas_object_resize(edje_obj2, WIDTH, HEIGHT);</div>
<div class="line">   <a class="code" href="Edje_8h.html#a9c06f3ce99e722e1cec2e9dc1bdb869e">edje_object_part_text_set</a>(edje_obj2, <span class="stringliteral">&quot;part_four&quot;</span>, <span class="stringliteral">&quot;EDJE OBJECT EXAMPLE&quot;</span>);</div>
<div class="line">   <a class="code" href="Edje_8h.html#a92fe0c052c9f023a29cd04d0bbd542a7">edje_object_signal_callback_add</a>(edje_obj2, <span class="stringliteral">&quot;color_class,del&quot;</span>, <span class="stringliteral">&quot;*&quot;</span>,</div>
<div class="line">                                   (<a class="code" href="Edje_8h.html#a54df542e812d8d08292a908819b559a8">Edje_Signal_Cb</a>) _color_class_callback_delete,</div>
<div class="line">                                   <span class="stringliteral">&quot;object&quot;</span>);</div>
<div class="line">   evas_object_show(edje_obj2);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> 1;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">char</span>         edje_file_path[PATH_MAX];</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span>  *edje_file = <span class="stringliteral">&quot;color-class.edj&quot;</span>;</div>
<div class="line">   Eina_Prefix *pfx;</div>
<div class="line">   color        c1, c2, c3;</div>
<div class="line">   <span class="keywordtype">int</span>          i;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (argc != 5)</div>
<div class="line">     {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;You have to use: %s color_class_name color1, color2,&quot;</span> \</div>
<div class="line">                <span class="stringliteral">&quot;color3\n&quot;</span>, argv[0]);</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Available colors:\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">for</span> (i = 0; i &lt; 8; i++)</div>
<div class="line">          fprintf(stderr, <span class="stringliteral">&quot;%s\n&quot;</span>, color_names[i]);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">   selected_class = argv[1];</div>
<div class="line">   <span class="keywordflow">if</span> (!(_get_color_from_name(argv[2], &amp;c1) &amp;&amp;</div>
<div class="line">         _get_color_from_name(argv[3], &amp;c2) &amp;&amp;</div>
<div class="line">         _get_color_from_name(argv[4], &amp;c3)))</div>
<div class="line">     {</div>
<div class="line">        fprintf(stderr, <span class="stringliteral">&quot;Color not available!\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">     }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!ecore_evas_init())</div>
<div class="line">     <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!<a class="code" href="Edje_8h.html#a18ea124be2b5f786aff0f2c3ba87883e">edje_init</a>())</div>
<div class="line">     <span class="keywordflow">goto</span> shutdown_ecore_evas;</div>
<div class="line"> </div>
<div class="line">   pfx = eina_prefix_new(argv[0], main,</div>
<div class="line">                         <span class="stringliteral">&quot;EDJE_EXAMPLES&quot;</span>,</div>
<div class="line">                         <span class="stringliteral">&quot;edje/examples&quot;</span>,</div>
<div class="line">                         edje_file,</div>
<div class="line">                         PACKAGE_BIN_DIR,</div>
<div class="line">                         PACKAGE_LIB_DIR,</div>
<div class="line">                         PACKAGE_DATA_DIR,</div>
<div class="line">                         PACKAGE_DATA_DIR);</div>
<div class="line">   <span class="keywordflow">if</span> (!pfx)</div>
<div class="line">     <span class="keywordflow">goto</span> shutdown_edje;</div>
<div class="line"> </div>
<div class="line">   snprintf(edje_file_path, <span class="keyword">sizeof</span>(edje_file_path),</div>
<div class="line">            <span class="stringliteral">&quot;%s/examples/%s&quot;</span>, eina_prefix_data_get(pfx), edje_file);</div>
<div class="line">   <span class="keywordflow">if</span> (!_create_windows(edje_file_path))</div>
<div class="line">     <span class="keywordflow">goto</span> free_prefix;</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="Edje_8h.html#a5a0c4fc202cac763a722a08d4be536e4">edje_color_class_set</a>(argv[1],                     <span class="comment">/* class name   */</span></div>
<div class="line">                        c1[0], c1[1], c1[2], c1[3],  <span class="comment">/* Object color */</span></div>
<div class="line">                        c2[0], c2[1], c2[2], c2[3],  <span class="comment">/* Text outline */</span></div>
<div class="line">                        c3[0], c3[1], c3[2], c3[3]); <span class="comment">/* Text shadow  */</span></div>
<div class="line"> </div>
<div class="line">   <span class="comment">/* Setting an arbitrary value just to see the difference between */</span></div>
<div class="line">   <span class="comment">/* process level and object level */</span></div>
<div class="line">   <a class="code" href="Edje_8h.html#a92f450d4d64970ad6114ac2533d1aad3">edje_object_color_class_set</a>(edje_obj2, argv[1], <span class="comment">/* class name   */</span></div>
<div class="line">                               128, 180, 77, 255,  <span class="comment">/* Object color */</span></div>
<div class="line">                               200, 22, 86, 255,   <span class="comment">/* Text outline */</span></div>
<div class="line">                               39, 90, 187, 255);  <span class="comment">/* Text shadow  */</span></div>
<div class="line"> </div>
<div class="line">   _color_classes_print();</div>
<div class="line"> </div>
<div class="line">   ecore_evas_show(ee1);</div>
<div class="line">   ecore_evas_show(ee2);</div>
<div class="line"> </div>
<div class="line">   ecore_main_loop_begin();</div>
<div class="line"> </div>
<div class="line">   eina_prefix_free(pfx);</div>
<div class="line">   ecore_evas_free(ee1);</div>
<div class="line">   ecore_evas_shutdown();</div>
<div class="line">   <a class="code" href="Edje_8h.html#af1529d06494668cf647e3160b48a0e2b">edje_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"> </div>
<div class="line"> free_prefix:</div>
<div class="line">   eina_prefix_free(pfx);</div>
<div class="line"> shutdown_edje:</div>
<div class="line">   <a class="code" href="Edje_8h.html#af1529d06494668cf647e3160b48a0e2b">edje_shutdown</a>();</div>
<div class="line"> shutdown_ecore_evas:</div>
<div class="line">   ecore_evas_shutdown();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">}</div>
<div class="ttc" id="aEdje_8h_html"><div class="ttname"><a href="Edje_8h.html">Edje.h</a></div><div class="ttdoc">Edje Graphical Design Library.</div></div>
<div class="ttc" id="aEdje_8h_html_a18ea124be2b5f786aff0f2c3ba87883e"><div class="ttname"><a href="Edje_8h.html#a18ea124be2b5f786aff0f2c3ba87883e">edje_init</a></div><div class="ttdeci">EAPI int edje_init(void)</div><div class="ttdoc">Initialize the Edje library.</div><div class="ttdef"><b>Definition:</b> edje_main.c:17</div></div>
<div class="ttc" id="aEdje_8h_html_a8cb00e5256fd50487f0669bc3bf9b8e0"><div class="ttname"><a href="Edje_8h.html#a8cb00e5256fd50487f0669bc3bf9b8e0">edje_object_add</a></div><div class="ttdeci">EAPI Evas_Object * edje_object_add(Evas *evas)</div><div class="ttdoc">Instantiate a new Edje object.</div><div class="ttdef"><b>Definition:</b> edje_smart.c:22</div></div>
<div class="ttc" id="aEdje_8h_html_a9c06f3ce99e722e1cec2e9dc1bdb869e"><div class="ttname"><a href="Edje_8h.html#a9c06f3ce99e722e1cec2e9dc1bdb869e">edje_object_part_text_set</a></div><div class="ttdeci">EAPI Eina_Bool edje_object_part_text_set(Evas_Object *obj, const char *part, const char *text)</div><div class="ttdoc">Sets the text for an object part.</div><div class="ttdef"><b>Definition:</b> edje_util.c:1243</div></div>
<div class="ttc" id="aEdje_8h_html_ab375d28c2726ccc32165b66b64abfc0a"><div class="ttname"><a href="Edje_8h.html#ab375d28c2726ccc32165b66b64abfc0a">edje_object_file_set</a></div><div class="ttdeci">EAPI Eina_Bool edje_object_file_set(Evas_Object *obj, const char *file, const char *group)</div><div class="ttdoc">Sets the EDJ file (and group within it) to load an Edje object's contents from.</div><div class="ttdef"><b>Definition:</b> edje_load.c:40</div></div>
<div class="ttc" id="aEdje_8h_html_af1529d06494668cf647e3160b48a0e2b"><div class="ttname"><a href="Edje_8h.html#af1529d06494668cf647e3160b48a0e2b">edje_shutdown</a></div><div class="ttdeci">EAPI int edje_shutdown(void)</div><div class="ttdoc">Shutdown the Edje library.</div><div class="ttdef"><b>Definition:</b> edje_main.c:171</div></div>
</div><!-- fragment --><p>The theme used in this example is: </p><div class="fragment"><div class="line">color_classes {</div>
<div class="line">    color_class {</div>
<div class="line">       name: &quot;red_class&quot;;</div>
<div class="line">       color: 255 0 0 255;       /* red */</div>
<div class="line">       color2: 255 0 0 255;      /* red */</div>
<div class="line">       color3: 255 0 0 255;      /* red */</div>
<div class="line">    }</div>
<div class="line">    color_class {</div>
<div class="line">       name: &quot;green_class&quot;;</div>
<div class="line">       color: 0 255 0 255;       /* green */</div>
<div class="line">       color2: 0 255 0 255;      /* green */</div>
<div class="line">       color3: 0 255 0 255;      /* green */</div>
<div class="line">    }</div>
<div class="line">    color_class {</div>
<div class="line">       name: &quot;blue_class&quot;;</div>
<div class="line">       color: 0 0 255 255;       /* blue */</div>
<div class="line">       color2: 0 0 255 255;      /* blue */</div>
<div class="line">       color3: 0 0 255 255;      /* blue */</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">collections {</div>
<div class="line">   group {</div>
<div class="line">      name: &quot;example_color_class&quot;;</div>
<div class="line">      max: 500 500;</div>
<div class="line">      min: 50 50;</div>
<div class="line"> </div>
<div class="line">      parts {</div>
<div class="line">         part {</div>
<div class="line">            name: &quot;part_one&quot;;</div>
<div class="line">            type: RECT;</div>
<div class="line">            scale: 1;</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;default&quot; 0.0;</div>
<div class="line">               color: 255 255 255 255;</div>
<div class="line">               color_class: &quot;blue_class&quot;;</div>
<div class="line">               rel1.relative: 0.0 0.0;</div>
<div class="line">               rel2.relative: 0.5 0.5;</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line"> </div>
<div class="line">         part {</div>
<div class="line">            name: &quot;part_two&quot;;</div>
<div class="line">            type: RECT;</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;default&quot; 0.0;</div>
<div class="line">               color: 255 255 255 255;</div>
<div class="line">               color_class: &quot;green_class&quot;;</div>
<div class="line">               rel1.relative: 0.5 0.0;</div>
<div class="line">               rel2.relative: 1.0 0.5;</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line">         part {</div>
<div class="line">            name: &quot;part_three&quot;;</div>
<div class="line">            type: RECT;</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;default&quot; 0.0;</div>
<div class="line">               color: 255 255 255 255;</div>
<div class="line">               color_class: &quot;red_class&quot;;</div>
<div class="line">               rel1.relative: 0.0 0.5;</div>
<div class="line">               rel2.relative: 1.0 1.0;</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line">         part {</div>
<div class="line">            name: &quot;part_four&quot;;</div>
<div class="line">            type: TEXT;</div>
<div class="line">            effect: OUTLINE_SHADOW;</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;default&quot; 0.0;</div>
<div class="line">               min: 50 50;</div>
<div class="line">               color: 255 255 255 255;</div>
<div class="line">               color2: 255 255 255 255;</div>
<div class="line">               color3: 255 255 255 255;</div>
<div class="line">               color_class: &quot;blue_class&quot;;</div>
<div class="line">               rel1.relative: 0.0 0.5;</div>
<div class="line">               rel2.relative: 1.0 1.0;</div>
<div class="line">               text {</div>
<div class="line">                  text_class: &quot;example&quot;;</div>
<div class="line">                  font: &quot;arial&quot;;</div>
<div class="line">                  size: 45;</div>
<div class="line">                  min: 1 1;</div>
<div class="line">               }</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line">}</div>
</div><!-- fragment --><p>To compile use this command: </p><pre class="fragment">* gcc -o edje-color-class edje-color-class.c -DPACKAGE_BIN_DIR=\"/Where/enlightenment/is/installed/bin\"
* -DPACKAGE_LIB_DIR=\"/Where/enlightenment/is/installed/lib\"
* -DPACKAGE_DATA_DIR=\"/Where/enlightenment/is/installed/share\"
* `pkg-config --cflags --libs evas ecore ecore-evas edje`
*
* edje_cc color-class.edc
* </pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>

<html>
<head>
    <title>Swallow example</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Edje Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="Edje__Edit_8h.html">Edje Edit API</a></li>
                <li><a href="Examples.html">Examples</a></li>
                <li><a href="luaref.html">LUA scripting</a></li>
                <li><a href="Edje_8h.html">Edje API</a></li>
                <li><a href="edcref.html">EDC Reference</a></li>
                <li><a href="pages.html">Releted Pages</a></li>
                <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Swallow example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p></p>
<p>This is a simple example in which we create a rect and swallow it.</p>
<p>Focusing on the relevant parts of the code we go right to the creation of our rectangle. It should be noted that we don't resize or show our rect, that is because when an object is swallowed it's geometry and visibility is controlled by the theme: </p><div class="fragment"><div class="line">   rect = evas_object_rectangle_add(evas);</div>
<div class="line">   evas_object_color_set(rect, 255, 0, 0, 255);</div>
<div class="line">   <a class="code" href="Edje_8h.html#a1d9a921c4e78fd9a2879ae8a7b7c0bc9">edje_object_part_swallow</a>(edje_obj, <span class="stringliteral">&quot;part_one&quot;</span>, rect);</div>
<div class="ttc" id="aEdje_8h_html_a1d9a921c4e78fd9a2879ae8a7b7c0bc9"><div class="ttname"><a href="Edje_8h.html#a1d9a921c4e78fd9a2879ae8a7b7c0bc9">edje_object_part_swallow</a></div><div class="ttdeci">EAPI Eina_Bool edje_object_part_swallow(Evas_Object *obj, const char *part, Evas_Object *obj_swallow)</div><div class="ttdoc">&quot;Swallows&quot; an object into one of the Edje object SWALLOW parts.</div><div class="ttdef"><b>Definition:</b> edje_util.c:2469</div></div>
</div><!-- fragment --><p> The other bit of code that is relevant to us now is our check that the swallow worked: </p><div class="fragment"><div class="line"> </div>
<div class="line">   obj = <a class="code" href="Edje_8h.html#ac326267418d01a30f60c1501644f89fe">edje_object_part_swallow_get</a>(edje_obj, <span class="stringliteral">&quot;part_one&quot;</span>);</div>
<div class="line">   <span class="keywordflow">if</span>(obj == rect)</div>
<div class="line">      printf(<span class="stringliteral">&quot;Swallowing worked!\n&quot;</span>);</div>
<div class="ttc" id="aEdje_8h_html_ac326267418d01a30f60c1501644f89fe"><div class="ttname"><a href="Edje_8h.html#ac326267418d01a30f60c1501644f89fe">edje_object_part_swallow_get</a></div><div class="ttdeci">EAPI Evas_Object * edje_object_part_swallow_get(const Evas_Object *obj, const char *part)</div><div class="ttdoc">Get the object currently swallowed by a part.</div><div class="ttdef"><b>Definition:</b> edje_util.c:2857</div></div>
</div><!-- fragment --><p> The full source code follows: </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef HAVE_CONFIG_H</span></div>
<div class="line"><span class="preprocessor"># include &quot;config.h&quot;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"># define __UNUSED__</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;Ecore.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Ecore_Evas.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Edje_8h.html">Edje.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define WIDTH  (300)</span></div>
<div class="line"><span class="preprocessor">#define HEIGHT (300)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_on_delete(Ecore_Evas *ee __UNUSED__)</div>
<div class="line">{</div>
<div class="line">   ecore_main_loop_quit();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="comment">/* here just to keep our example&#39;s window size and background image&#39;s</span></div>
<div class="line"><span class="comment"> * size in synchrony */</span></div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_on_canvas_resize(Ecore_Evas *ee)</div>
<div class="line">{</div>
<div class="line">   Evas_Object *bg;</div>
<div class="line">   <span class="keywordtype">int</span>          w;</div>
<div class="line">   <span class="keywordtype">int</span>          h;</div>
<div class="line"> </div>
<div class="line">   bg = ecore_evas_data_get(ee, <span class="stringliteral">&quot;background&quot;</span>);</div>
<div class="line">   ecore_evas_geometry_get(ee, NULL, NULL, &amp;w, &amp;h);</div>
<div class="line">   evas_object_resize(bg, w, h);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc __UNUSED__, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">char</span>         edje_file_path[PATH_MAX];</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span>  *edje_file = <span class="stringliteral">&quot;swallow.edj&quot;</span>;</div>
<div class="line">   Ecore_Evas  *ee;</div>
<div class="line">   Evas        *evas;</div>
<div class="line">   Evas_Object *bg;</div>
<div class="line">   Evas_Object *rect;</div>
<div class="line">   Evas_Object *obj;</div>
<div class="line">   Evas_Object *edje_obj;</div>
<div class="line">   Eina_Prefix *pfx;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!ecore_evas_init())</div>
<div class="line">     <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!<a class="code" href="Edje_8h.html#a18ea124be2b5f786aff0f2c3ba87883e">edje_init</a>())</div>
<div class="line">     <span class="keywordflow">goto</span> shutdown_ecore_evas;</div>
<div class="line"> </div>
<div class="line">   pfx = eina_prefix_new(argv[0], main,</div>
<div class="line">                         <span class="stringliteral">&quot;EDJE_EXAMPLES&quot;</span>,</div>
<div class="line">                         <span class="stringliteral">&quot;edje/examples&quot;</span>,</div>
<div class="line">                         edje_file,</div>
<div class="line">                         PACKAGE_BIN_DIR,</div>
<div class="line">                         PACKAGE_LIB_DIR,</div>
<div class="line">                         PACKAGE_DATA_DIR,</div>
<div class="line">                         PACKAGE_DATA_DIR);</div>
<div class="line">   <span class="keywordflow">if</span> (!pfx)</div>
<div class="line">     <span class="keywordflow">goto</span> shutdown_edje;</div>
<div class="line"> </div>
<div class="line">   <span class="comment">/* this will give you a window with an Evas canvas under the first</span></div>
<div class="line"><span class="comment">    * engine available */</span></div>
<div class="line">   ee = ecore_evas_new(NULL, 0, 0, WIDTH, HEIGHT, NULL);</div>
<div class="line">   <span class="keywordflow">if</span> (!ee)</div>
<div class="line">     <span class="keywordflow">goto</span> free_prefix;</div>
<div class="line"> </div>
<div class="line">   ecore_evas_callback_delete_request_set(ee, _on_delete);</div>
<div class="line">   ecore_evas_callback_resize_set(ee, _on_canvas_resize);</div>
<div class="line">   ecore_evas_title_set(ee, <span class="stringliteral">&quot;Edje Swallow Example&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   evas = ecore_evas_get(ee);</div>
<div class="line"> </div>
<div class="line">   bg = evas_object_rectangle_add(evas);</div>
<div class="line">   evas_object_color_set(bg, 255, 255, 255, 255); <span class="comment">/* white bg */</span></div>
<div class="line">   evas_object_move(bg, 0, 0); <span class="comment">/* at canvas&#39; origin */</span></div>
<div class="line">   evas_object_resize(bg, WIDTH, HEIGHT); <span class="comment">/* covers full canvas */</span></div>
<div class="line">   evas_object_show(bg);</div>
<div class="line">   ecore_evas_data_set(ee, <span class="stringliteral">&quot;background&quot;</span>, bg);</div>
<div class="line"> </div>
<div class="line">   edje_obj = <a class="code" href="Edje_8h.html#a8cb00e5256fd50487f0669bc3bf9b8e0">edje_object_add</a>(evas);</div>
<div class="line"> </div>
<div class="line">   snprintf(edje_file_path, <span class="keyword">sizeof</span>(edje_file_path),</div>
<div class="line">            <span class="stringliteral">&quot;%s/examples/%s&quot;</span>, eina_prefix_data_get(pfx), edje_file);</div>
<div class="line">   <a class="code" href="Edje_8h.html#ab375d28c2726ccc32165b66b64abfc0a">edje_object_file_set</a>(edje_obj, edje_file_path, <span class="stringliteral">&quot;example_group&quot;</span>);</div>
<div class="line">   evas_object_move(edje_obj, 20, 20);</div>
<div class="line">   evas_object_resize(edje_obj, WIDTH - 40, HEIGHT - 40);</div>
<div class="line">   evas_object_show(edje_obj);</div>
<div class="line"> </div>
<div class="line">   rect = evas_object_rectangle_add(evas);</div>
<div class="line">   evas_object_color_set(rect, 255, 0, 0, 255);</div>
<div class="line">   <a class="code" href="Edje_8h.html#a1d9a921c4e78fd9a2879ae8a7b7c0bc9">edje_object_part_swallow</a>(edje_obj, <span class="stringliteral">&quot;part_one&quot;</span>, rect);</div>
<div class="line"> </div>
<div class="line">   obj = <a class="code" href="Edje_8h.html#ac326267418d01a30f60c1501644f89fe">edje_object_part_swallow_get</a>(edje_obj, <span class="stringliteral">&quot;part_one&quot;</span>);</div>
<div class="line">   <span class="keywordflow">if</span>(obj == rect)</div>
<div class="line">      printf(<span class="stringliteral">&quot;Swallowing worked!\n&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   ecore_evas_show(ee);</div>
<div class="line"> </div>
<div class="line">   ecore_main_loop_begin();</div>
<div class="line"> </div>
<div class="line">   eina_prefix_free(pfx);</div>
<div class="line">   ecore_evas_free(ee);</div>
<div class="line">   ecore_evas_shutdown();</div>
<div class="line">   <a class="code" href="Edje_8h.html#af1529d06494668cf647e3160b48a0e2b">edje_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"> </div>
<div class="line"> free_prefix:</div>
<div class="line">   eina_prefix_free(pfx);</div>
<div class="line"> shutdown_edje:</div>
<div class="line">   <a class="code" href="Edje_8h.html#af1529d06494668cf647e3160b48a0e2b">edje_shutdown</a>();</div>
<div class="line"> shutdown_ecore_evas:</div>
<div class="line">   ecore_evas_shutdown();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">}</div>
<div class="ttc" id="aEdje_8h_html"><div class="ttname"><a href="Edje_8h.html">Edje.h</a></div><div class="ttdoc">Edje Graphical Design Library.</div></div>
<div class="ttc" id="aEdje_8h_html_a18ea124be2b5f786aff0f2c3ba87883e"><div class="ttname"><a href="Edje_8h.html#a18ea124be2b5f786aff0f2c3ba87883e">edje_init</a></div><div class="ttdeci">EAPI int edje_init(void)</div><div class="ttdoc">Initialize the Edje library.</div><div class="ttdef"><b>Definition:</b> edje_main.c:17</div></div>
<div class="ttc" id="aEdje_8h_html_a8cb00e5256fd50487f0669bc3bf9b8e0"><div class="ttname"><a href="Edje_8h.html#a8cb00e5256fd50487f0669bc3bf9b8e0">edje_object_add</a></div><div class="ttdeci">EAPI Evas_Object * edje_object_add(Evas *evas)</div><div class="ttdoc">Instantiate a new Edje object.</div><div class="ttdef"><b>Definition:</b> edje_smart.c:22</div></div>
<div class="ttc" id="aEdje_8h_html_ab375d28c2726ccc32165b66b64abfc0a"><div class="ttname"><a href="Edje_8h.html#ab375d28c2726ccc32165b66b64abfc0a">edje_object_file_set</a></div><div class="ttdeci">EAPI Eina_Bool edje_object_file_set(Evas_Object *obj, const char *file, const char *group)</div><div class="ttdoc">Sets the EDJ file (and group within it) to load an Edje object's contents from.</div><div class="ttdef"><b>Definition:</b> edje_load.c:40</div></div>
<div class="ttc" id="aEdje_8h_html_af1529d06494668cf647e3160b48a0e2b"><div class="ttname"><a href="Edje_8h.html#af1529d06494668cf647e3160b48a0e2b">edje_shutdown</a></div><div class="ttdeci">EAPI int edje_shutdown(void)</div><div class="ttdoc">Shutdown the Edje library.</div><div class="ttdef"><b>Definition:</b> edje_main.c:171</div></div>
</div><!-- fragment --><p>To compile use this command: </p><pre class="fragment">* gcc -o edje-swallow edje-swallow.c -DPACKAGE_BIN_DIR=\"/Where/enlightenment/is/installed/bin\" -DPACKAGE_LIB_DIR=\"/Where/enlightenment/is/installed/lib\"
* -DPACKAGE_DATA_DIR=\"/Where/enlightenment/is/installed/share\"
* `pkg-config --cflags --libs evas ecore ecore-evas edje`
*
* edje_cc swallow.edc
* </pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>

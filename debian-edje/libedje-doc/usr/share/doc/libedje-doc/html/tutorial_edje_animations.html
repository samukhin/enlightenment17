<html>
<head>
    <title>Edje Animations example</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Edje Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="Edje__Edit_8h.html">Edje Edit API</a></li>
                <li><a href="Examples.html">Examples</a></li>
                <li><a href="luaref.html">LUA scripting</a></li>
                <li><a href="Edje_8h.html">Edje API</a></li>
                <li><a href="edcref.html">EDC Reference</a></li>
                <li><a href="pages.html">Releted Pages</a></li>
                <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Edje Animations example </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>In this example we will figure out how to manipulate the animations on an Edje object.</p>
<p>After reading this document you will be able to manipulate the frametime, freeze, pause and stop, all animations on an Edje object.</p>
<p>To play with this example you will use the keyboard. Below are listed the keys and what each does.</p>
<ul>
<li>'+' Increase the frametime;</li>
<li>'-' Decrease the frametime;</li>
<li>'=' Prints the actual frametime and says if the animations is playing;</li>
<li>'f' Freezes the animations in the Edje object;</li>
<li>'F' Freezes the animations in all objects in the running program;</li>
<li>'t' Thaws the animations in the Edje object;</li>
<li>'T' Thaws the animations in all objects in the running program;</li>
<li>'s' Pauses the animations;</li>
<li>'p' Plays the animations previously stopped;</li>
<li>'a' Starts the animation in the Edje object;</li>
<li>'A' Stops the animations in the Edje object;</li>
</ul>
<p>Now that we've explained how to use our example, we will see how it is made. Let's start by looking at the piece of code responsible to the actions commented above.  </p><div class="fragment"><div class="line">_on_key_down(<span class="keywordtype">void</span> *data __UNUSED__, Evas *evas __UNUSED__, Evas_Object *obj, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   Evas_Event_Key_Down *ev;</div>
<div class="line">   <span class="keywordtype">double</span>               ft;</div>
<div class="line"> </div>
<div class="line">   ev = (Evas_Event_Key_Down *)event_info;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!strcmp(ev-&gt;keyname, <span class="stringliteral">&quot;h&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        fprintf(stdout, commands);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;plus&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        frametime *= 2.0;</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Increasing frametime to: %f\n&quot;</span>, frametime);</div>
<div class="line">        <a class="code" href="Edje_8h.html#af0f430696a6e26a5cd0c3c3eeda129c7">edje_frametime_set</a>(frametime);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;minus&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        frametime /= 2.0;</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Decreasing frametime to: %f\n&quot;</span>, frametime);</div>
<div class="line">        <a class="code" href="Edje_8h.html#af0f430696a6e26a5cd0c3c3eeda129c7">edje_frametime_set</a>(frametime);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;equal&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        ft = <a class="code" href="Edje_8h.html#a2ef192918d2add6a84a86186af90332f">edje_frametime_get</a>();</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Frametime: %f\n&quot;</span>, ft);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="Edje_8h.html#a65c8688fb5d330cbf8cf0c107078d0dc">edje_object_play_get</a>(obj))</div>
<div class="line">          fprintf(stdout, <span class="stringliteral">&quot;Object is playing\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          fprintf(stdout, <span class="stringliteral">&quot;Object was paused\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="Edje_8h.html#a78be18b7a489cc91bdd29045a907675d">edje_object_animation_get</a>(obj))</div>
<div class="line">          fprintf(stdout, <span class="stringliteral">&quot;Animation is running\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          fprintf(stdout, <span class="stringliteral">&quot;Animation was stopped\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;s&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#a27fcfd0819644ad69787503d36846e5f">edje_object_play_set</a>(obj, EINA_FALSE);</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Pausing the object\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;p&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#a27fcfd0819644ad69787503d36846e5f">edje_object_play_set</a>(obj, EINA_TRUE);</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Playing the object\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;f&quot;</span>))</div>
<div class="line">       fprintf(stdout, <span class="stringliteral">&quot;Freezing object. Count: %d\n&quot;</span>, <a class="code" href="Edje_8h.html#ad5a18a94f5d960ec048344405c427e66">edje_object_freeze</a>(obj));</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;t&quot;</span>))</div>
<div class="line">       fprintf(stdout, <span class="stringliteral">&quot;Thawing object. Count: %d\n&quot;</span>, <a class="code" href="Edje_8h.html#aaacbe9411555a39261a7fe883b502149">edje_object_thaw</a>(obj));</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;F&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#a2c8aa4b00235985a3ff93fcd3ce5a4c4">edje_freeze</a>();</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Freezing all objects\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;T&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#a559a1db557773c41d4c4f8afd4d99b2d">edje_thaw</a>();</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Thawing all objects\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;a&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#af4fe596ee8f90464a87ef45dbbb905b7">edje_object_animation_set</a>(obj, EINA_TRUE);</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Starting the animation in the Edje object\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;A&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#af4fe596ee8f90464a87ef45dbbb905b7">edje_object_animation_set</a>(obj, EINA_FALSE);</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Stopping the animation in the Edje object\n&quot;</span>);</div>
<div class="ttc" id="aEdje_8h_html_a27fcfd0819644ad69787503d36846e5f"><div class="ttname"><a href="Edje_8h.html#a27fcfd0819644ad69787503d36846e5f">edje_object_play_set</a></div><div class="ttdeci">EAPI void edje_object_play_set(Evas_Object *obj, Eina_Bool play)</div><div class="ttdoc">Set the Edje object to playing or paused states.</div><div class="ttdef"><b>Definition:</b> edje_program.c:177</div></div>
<div class="ttc" id="aEdje_8h_html_a2c8aa4b00235985a3ff93fcd3ce5a4c4"><div class="ttname"><a href="Edje_8h.html#a2c8aa4b00235985a3ff93fcd3ce5a4c4">edje_freeze</a></div><div class="ttdeci">EAPI void edje_freeze(void)</div><div class="ttdoc">Freeze Edje objects.</div><div class="ttdef"><b>Definition:</b> edje_util.c:233</div></div>
<div class="ttc" id="aEdje_8h_html_a2ef192918d2add6a84a86186af90332f"><div class="ttname"><a href="Edje_8h.html#a2ef192918d2add6a84a86186af90332f">edje_frametime_get</a></div><div class="ttdeci">EAPI double edje_frametime_get(void)</div><div class="ttdoc">Get edje trasitions' frame time.</div><div class="ttdef"><b>Definition:</b> edje_program.c:22</div></div>
<div class="ttc" id="aEdje_8h_html_a559a1db557773c41d4c4f8afd4d99b2d"><div class="ttname"><a href="Edje_8h.html#a559a1db557773c41d4c4f8afd4d99b2d">edje_thaw</a></div><div class="ttdeci">EAPI void edje_thaw(void)</div><div class="ttdoc">Thaw Edje objects.</div><div class="ttdef"><b>Definition:</b> edje_util.c:273</div></div>
<div class="ttc" id="aEdje_8h_html_a65c8688fb5d330cbf8cf0c107078d0dc"><div class="ttname"><a href="Edje_8h.html#a65c8688fb5d330cbf8cf0c107078d0dc">edje_object_play_get</a></div><div class="ttdeci">EAPI Eina_Bool edje_object_play_get(const Evas_Object *obj)</div><div class="ttdoc">Get the Edje object's state.</div><div class="ttdef"><b>Definition:</b> edje_program.c:213</div></div>
<div class="ttc" id="aEdje_8h_html_a78be18b7a489cc91bdd29045a907675d"><div class="ttname"><a href="Edje_8h.html#a78be18b7a489cc91bdd29045a907675d">edje_object_animation_get</a></div><div class="ttdeci">EAPI Eina_Bool edje_object_animation_get(const Evas_Object *obj)</div><div class="ttdoc">Get the Edje object's animation state.</div><div class="ttdef"><b>Definition:</b> edje_program.c:283</div></div>
<div class="ttc" id="aEdje_8h_html_aaacbe9411555a39261a7fe883b502149"><div class="ttname"><a href="Edje_8h.html#aaacbe9411555a39261a7fe883b502149">edje_object_thaw</a></div><div class="ttdeci">EAPI int edje_object_thaw(Evas_Object *obj)</div><div class="ttdoc">Thaws the Edje object.</div><div class="ttdef"><b>Definition:</b> edje_util.c:468</div></div>
<div class="ttc" id="aEdje_8h_html_ad5a18a94f5d960ec048344405c427e66"><div class="ttname"><a href="Edje_8h.html#ad5a18a94f5d960ec048344405c427e66">edje_object_freeze</a></div><div class="ttdeci">EAPI int edje_object_freeze(Evas_Object *obj)</div><div class="ttdoc">Freezes the Edje object.</div><div class="ttdef"><b>Definition:</b> edje_util.c:450</div></div>
<div class="ttc" id="aEdje_8h_html_af0f430696a6e26a5cd0c3c3eeda129c7"><div class="ttname"><a href="Edje_8h.html#af0f430696a6e26a5cd0c3c3eeda129c7">edje_frametime_set</a></div><div class="ttdeci">EAPI void edje_frametime_set(double t)</div><div class="ttdoc">Set edje trasitions' frame time.</div><div class="ttdef"><b>Definition:</b> edje_program.c:16</div></div>
<div class="ttc" id="aEdje_8h_html_af4fe596ee8f90464a87ef45dbbb905b7"><div class="ttname"><a href="Edje_8h.html#af4fe596ee8f90464a87ef45dbbb905b7">edje_object_animation_set</a></div><div class="ttdeci">EAPI void edje_object_animation_set(Evas_Object *obj, Eina_Bool on)</div><div class="ttdoc">Set the object's animation state.</div><div class="ttdef"><b>Definition:</b> edje_program.c:226</div></div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;keyname, <span class="stringliteral">&quot;Escape&quot;</span>))</div>
<div class="line">     ecore_main_loop_quit();</div>
<div class="line">   <span class="keywordflow">else</span></div>
<div class="line">     {</div>
<div class="line">        printf(<span class="stringliteral">&quot;unhandled key: %s\n&quot;</span>, ev-&gt;keyname);</div>
<div class="line">        fprintf(stdout, commands);</div>
<div class="line">     }</div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>The actions for the keys 'f' and 'F' will have the same effect in our example, just because there is only one object in the running program, The same happens with the keys 't' and 'T'.</dd></dl>
<p>As you may have seen these set of functions are pretty easy to handle. The other important part of this example is the EDC file. The animations used in the code were created there  </p><div class="fragment"><div class="line">      program {</div>
<div class="line">         signal: &quot;load&quot;;</div>
<div class="line">         source: &quot;&quot;;</div>
<div class="line">         in: 2.0 0.0;</div>
<div class="line">         after: &quot;animation,state1&quot;;</div>
<div class="line">      }</div>
<div class="line">      program {</div>
<div class="line">         name: &quot;animation,state1&quot;;</div>
<div class="line">         signal: &quot;animation,start&quot;;</div>
<div class="line">         source: &quot;&quot;;</div>
<div class="line">         in: 1.0 0.0;</div>
<div class="line">         action: STATE_SET &quot;invert&quot; 1.0;</div>
<div class="line">         target: &quot;part_one&quot;;</div>
<div class="line">         target: &quot;part_two&quot;;</div>
<div class="line">         target: &quot;part_three&quot;;</div>
<div class="line">         transition: LINEAR 0.6;</div>
<div class="line">         after: &quot;animation,state2&quot;;</div>
<div class="line">      }</div>
<div class="line">      program {</div>
<div class="line">         name: &quot;animation,state2&quot;;</div>
<div class="line">         signal: &quot;animation,start&quot;;</div>
<div class="line">         source: &quot;&quot;;</div>
<div class="line">         in: 1.0 0.0;</div>
<div class="line">         action: STATE_SET &quot;default&quot; 0.0;</div>
<div class="line">         target: &quot;part_one&quot;;</div>
<div class="line">         target: &quot;part_two&quot;;</div>
<div class="line">         target: &quot;part_three&quot;;</div>
<div class="line">         transition: LINEAR 0.6;</div>
<div class="line">         after: &quot;animation,state1&quot;;</div>
<div class="line">   }</div>
<div class="line">}</div>
</div><!-- fragment --><p> The example's window should look like this picture:</p>
<div class="image">
<img src="edje-animations.png" alt=""/>
</div>
<p>   <br  />
 </p><div class="image">
<img src="edje-animations2.png" alt=""/>
</div>
  <p>The full example follows.</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef HAVE_CONFIG_H</span></div>
<div class="line"><span class="preprocessor"># include &quot;config.h&quot;</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor"># define __UNUSED__</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;Ecore.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Ecore_Evas.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Edje_8h.html">Edje.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define WIDTH  (400)</span></div>
<div class="line"><span class="preprocessor">#define HEIGHT (300)</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> commands[] = \</div>
<div class="line">  <span class="stringliteral">&quot;commands are:\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\t+ - increase frametime\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\t- - decrease frametime\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\t= - status of the animation\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\ts - pause\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\tp - play\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\tf - freeze one object\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\tF - freeze all objects\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\tt - thaw one object\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\tT - thaw all objects\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\ta - start animation of one object\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\tA - stop animation of one object\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\tEsc - exit\n&quot;</span></div>
<div class="line">  <span class="stringliteral">&quot;\th - print help\n&quot;</span>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">double</span> frametime = 1.0 / 30.0; <span class="comment">/* default value */</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_on_delete_cb(Ecore_Evas *ee __UNUSED__)</div>
<div class="line">{</div>
<div class="line">    ecore_main_loop_quit();</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_on_canvas_resize(Ecore_Evas *ee)</div>
<div class="line">{</div>
<div class="line">   Evas_Object *bg;</div>
<div class="line">   Evas_Object *edje_obj;</div>
<div class="line">   <span class="keywordtype">int</span>          w;</div>
<div class="line">   <span class="keywordtype">int</span>          h;</div>
<div class="line"> </div>
<div class="line">   bg = ecore_evas_data_get(ee, <span class="stringliteral">&quot;background&quot;</span>);</div>
<div class="line">   edje_obj = ecore_evas_data_get(ee, <span class="stringliteral">&quot;edje_obj&quot;</span>);</div>
<div class="line">   ecore_evas_geometry_get(ee, NULL, NULL, &amp;w, &amp;h);</div>
<div class="line">   evas_object_resize(bg, w, h);</div>
<div class="line">   evas_object_resize(edje_obj, w, h);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">_on_key_down(<span class="keywordtype">void</span> *data __UNUSED__, Evas *evas __UNUSED__, Evas_Object *obj, <span class="keywordtype">void</span> *event_info)</div>
<div class="line">{</div>
<div class="line">   Evas_Event_Key_Down *ev;</div>
<div class="line">   <span class="keywordtype">double</span>               ft;</div>
<div class="line"> </div>
<div class="line">   ev = (Evas_Event_Key_Down *)event_info;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!strcmp(ev-&gt;keyname, <span class="stringliteral">&quot;h&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        fprintf(stdout, commands);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;plus&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        frametime *= 2.0;</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Increasing frametime to: %f\n&quot;</span>, frametime);</div>
<div class="line">        <a class="code" href="Edje_8h.html#af0f430696a6e26a5cd0c3c3eeda129c7">edje_frametime_set</a>(frametime);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;minus&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        frametime /= 2.0;</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Decreasing frametime to: %f\n&quot;</span>, frametime);</div>
<div class="line">        <a class="code" href="Edje_8h.html#af0f430696a6e26a5cd0c3c3eeda129c7">edje_frametime_set</a>(frametime);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;equal&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        ft = <a class="code" href="Edje_8h.html#a2ef192918d2add6a84a86186af90332f">edje_frametime_get</a>();</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Frametime: %f\n&quot;</span>, ft);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="Edje_8h.html#a65c8688fb5d330cbf8cf0c107078d0dc">edje_object_play_get</a>(obj))</div>
<div class="line">          fprintf(stdout, <span class="stringliteral">&quot;Object is playing\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          fprintf(stdout, <span class="stringliteral">&quot;Object was paused\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="Edje_8h.html#a78be18b7a489cc91bdd29045a907675d">edje_object_animation_get</a>(obj))</div>
<div class="line">          fprintf(stdout, <span class="stringliteral">&quot;Animation is running\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">          fprintf(stdout, <span class="stringliteral">&quot;Animation was stopped\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;s&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#a27fcfd0819644ad69787503d36846e5f">edje_object_play_set</a>(obj, EINA_FALSE);</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Pausing the object\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;p&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#a27fcfd0819644ad69787503d36846e5f">edje_object_play_set</a>(obj, EINA_TRUE);</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Playing the object\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;f&quot;</span>))</div>
<div class="line">       fprintf(stdout, <span class="stringliteral">&quot;Freezing object. Count: %d\n&quot;</span>, <a class="code" href="Edje_8h.html#ad5a18a94f5d960ec048344405c427e66">edje_object_freeze</a>(obj));</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;t&quot;</span>))</div>
<div class="line">       fprintf(stdout, <span class="stringliteral">&quot;Thawing object. Count: %d\n&quot;</span>, <a class="code" href="Edje_8h.html#aaacbe9411555a39261a7fe883b502149">edje_object_thaw</a>(obj));</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;F&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#a2c8aa4b00235985a3ff93fcd3ce5a4c4">edje_freeze</a>();</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Freezing all objects\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;T&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#a559a1db557773c41d4c4f8afd4d99b2d">edje_thaw</a>();</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Thawing all objects\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;a&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#af4fe596ee8f90464a87ef45dbbb905b7">edje_object_animation_set</a>(obj, EINA_TRUE);</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Starting the animation in the Edje object\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;key, <span class="stringliteral">&quot;A&quot;</span>))</div>
<div class="line">     {</div>
<div class="line">        <a class="code" href="Edje_8h.html#af4fe596ee8f90464a87ef45dbbb905b7">edje_object_animation_set</a>(obj, EINA_FALSE);</div>
<div class="line">        fprintf(stdout, <span class="stringliteral">&quot;Stopping the animation in the Edje object\n&quot;</span>);</div>
<div class="line">     }</div>
<div class="line">   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcmp(ev-&gt;keyname, <span class="stringliteral">&quot;Escape&quot;</span>))</div>
<div class="line">     ecore_main_loop_quit();</div>
<div class="line">   <span class="keywordflow">else</span></div>
<div class="line">     {</div>
<div class="line">        printf(<span class="stringliteral">&quot;unhandled key: %s\n&quot;</span>, ev-&gt;keyname);</div>
<div class="line">        fprintf(stdout, commands);</div>
<div class="line">     }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc __UNUSED__, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">   <span class="keywordtype">char</span>         edje_file_path[PATH_MAX];</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span>  *edje_file = <span class="stringliteral">&quot;animations.edj&quot;</span>;</div>
<div class="line">   Ecore_Evas  *ee;</div>
<div class="line">   Evas        *evas;</div>
<div class="line">   Evas_Object *bg;</div>
<div class="line">   Evas_Object *edje_obj;</div>
<div class="line">   Eina_Prefix *pfx;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!ecore_evas_init())</div>
<div class="line">     <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">if</span> (!<a class="code" href="Edje_8h.html#a18ea124be2b5f786aff0f2c3ba87883e">edje_init</a>())</div>
<div class="line">     <span class="keywordflow">goto</span> shutdown_ecore_evas;</div>
<div class="line"> </div>
<div class="line">   pfx = eina_prefix_new(argv[0], main,</div>
<div class="line">                         <span class="stringliteral">&quot;EDJE_EXAMPLES&quot;</span>,</div>
<div class="line">                         <span class="stringliteral">&quot;edje/examples&quot;</span>,</div>
<div class="line">                         edje_file,</div>
<div class="line">                         PACKAGE_BIN_DIR,</div>
<div class="line">                         PACKAGE_LIB_DIR,</div>
<div class="line">                         PACKAGE_DATA_DIR,</div>
<div class="line">                         PACKAGE_DATA_DIR);</div>
<div class="line">   <span class="keywordflow">if</span> (!pfx)</div>
<div class="line">     <span class="keywordflow">goto</span> shutdown_edje;</div>
<div class="line"> </div>
<div class="line">   <span class="comment">/* this will give you a window with an Evas canvas under the first</span></div>
<div class="line"><span class="comment">    * engine available */</span></div>
<div class="line">   ee = ecore_evas_new(NULL, 0, 0, WIDTH, HEIGHT, NULL);</div>
<div class="line">   <span class="keywordflow">if</span> (!ee)</div>
<div class="line">     <span class="keywordflow">goto</span> free_prefix;</div>
<div class="line"> </div>
<div class="line">   ecore_evas_callback_delete_request_set(ee, _on_delete_cb);</div>
<div class="line">   ecore_evas_callback_resize_set(ee, _on_canvas_resize);</div>
<div class="line">   ecore_evas_title_set(ee, <span class="stringliteral">&quot;Edje Animations Example&quot;</span>);</div>
<div class="line"> </div>
<div class="line">   evas = ecore_evas_get(ee);</div>
<div class="line"> </div>
<div class="line">   bg = evas_object_rectangle_add(evas);</div>
<div class="line">   evas_object_color_set(bg, 255, 255, 255, 255); <span class="comment">/* white bg */</span></div>
<div class="line">   evas_object_move(bg, 0, 0); <span class="comment">/* at canvas&#39; origin */</span></div>
<div class="line">   evas_object_resize(bg, WIDTH, HEIGHT); <span class="comment">/* covers full canvas */</span></div>
<div class="line">   evas_object_show(bg);</div>
<div class="line">   ecore_evas_data_set(ee, <span class="stringliteral">&quot;background&quot;</span>, bg);</div>
<div class="line"> </div>
<div class="line">   edje_obj = <a class="code" href="Edje_8h.html#a8cb00e5256fd50487f0669bc3bf9b8e0">edje_object_add</a>(evas);</div>
<div class="line"> </div>
<div class="line">   snprintf(edje_file_path, <span class="keyword">sizeof</span>(edje_file_path),</div>
<div class="line">            <span class="stringliteral">&quot;%s/examples/%s&quot;</span>, eina_prefix_data_get(pfx), edje_file);</div>
<div class="line">   <a class="code" href="Edje_8h.html#ab375d28c2726ccc32165b66b64abfc0a">edje_object_file_set</a>(edje_obj, edje_file_path, <span class="stringliteral">&quot;animations_group&quot;</span>);</div>
<div class="line">   evas_object_move(edje_obj, 0, 0);</div>
<div class="line">   evas_object_resize(edje_obj, WIDTH, HEIGHT);</div>
<div class="line">   evas_object_show(edje_obj);</div>
<div class="line">   ecore_evas_data_set(ee, <span class="stringliteral">&quot;edje_obj&quot;</span>, edje_obj);</div>
<div class="line"> </div>
<div class="line">   evas_object_event_callback_add(edje_obj, EVAS_CALLBACK_KEY_DOWN,</div>
<div class="line">                                  _on_key_down, NULL);</div>
<div class="line">   evas_object_focus_set(edje_obj, EINA_TRUE);</div>
<div class="line"> </div>
<div class="line">   fprintf(stdout, commands);</div>
<div class="line"> </div>
<div class="line">   ecore_evas_show(ee);</div>
<div class="line"> </div>
<div class="line">   ecore_main_loop_begin();</div>
<div class="line"> </div>
<div class="line">   eina_prefix_free(pfx);</div>
<div class="line">   ecore_evas_free(ee);</div>
<div class="line">   ecore_evas_shutdown();</div>
<div class="line">   <a class="code" href="Edje_8h.html#af1529d06494668cf647e3160b48a0e2b">edje_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"> </div>
<div class="line"> free_prefix:</div>
<div class="line">   eina_prefix_free(pfx);</div>
<div class="line"> shutdown_edje:</div>
<div class="line">   <a class="code" href="Edje_8h.html#af1529d06494668cf647e3160b48a0e2b">edje_shutdown</a>();</div>
<div class="line"> shutdown_ecore_evas:</div>
<div class="line">   ecore_evas_shutdown();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">}</div>
<div class="ttc" id="aEdje_8h_html"><div class="ttname"><a href="Edje_8h.html">Edje.h</a></div><div class="ttdoc">Edje Graphical Design Library.</div></div>
<div class="ttc" id="aEdje_8h_html_a18ea124be2b5f786aff0f2c3ba87883e"><div class="ttname"><a href="Edje_8h.html#a18ea124be2b5f786aff0f2c3ba87883e">edje_init</a></div><div class="ttdeci">EAPI int edje_init(void)</div><div class="ttdoc">Initialize the Edje library.</div><div class="ttdef"><b>Definition:</b> edje_main.c:17</div></div>
<div class="ttc" id="aEdje_8h_html_a8cb00e5256fd50487f0669bc3bf9b8e0"><div class="ttname"><a href="Edje_8h.html#a8cb00e5256fd50487f0669bc3bf9b8e0">edje_object_add</a></div><div class="ttdeci">EAPI Evas_Object * edje_object_add(Evas *evas)</div><div class="ttdoc">Instantiate a new Edje object.</div><div class="ttdef"><b>Definition:</b> edje_smart.c:22</div></div>
<div class="ttc" id="aEdje_8h_html_ab375d28c2726ccc32165b66b64abfc0a"><div class="ttname"><a href="Edje_8h.html#ab375d28c2726ccc32165b66b64abfc0a">edje_object_file_set</a></div><div class="ttdeci">EAPI Eina_Bool edje_object_file_set(Evas_Object *obj, const char *file, const char *group)</div><div class="ttdoc">Sets the EDJ file (and group within it) to load an Edje object's contents from.</div><div class="ttdef"><b>Definition:</b> edje_load.c:40</div></div>
<div class="ttc" id="aEdje_8h_html_af1529d06494668cf647e3160b48a0e2b"><div class="ttname"><a href="Edje_8h.html#af1529d06494668cf647e3160b48a0e2b">edje_shutdown</a></div><div class="ttdeci">EAPI int edje_shutdown(void)</div><div class="ttdoc">Shutdown the Edje library.</div><div class="ttdef"><b>Definition:</b> edje_main.c:171</div></div>
</div><!-- fragment --> <div class="fragment"><div class="line">collections {</div>
<div class="line">   group {</div>
<div class="line">      name: &quot;animations_group&quot;;</div>
<div class="line">      min: 100 80;</div>
<div class="line"> </div>
<div class="line">      parts {</div>
<div class="line">         part {</div>
<div class="line">            name: &quot;part_one&quot;;</div>
<div class="line">            type: RECT;</div>
<div class="line">            scale: 1;</div>
<div class="line">            description {</div>
<div class="line">               min: 50 50;</div>
<div class="line">               state: &quot;default&quot; 0.0;</div>
<div class="line">               color: 0 0 0 255; /* black */</div>
<div class="line">               rel1.relative: 0.0 0.0;</div>
<div class="line">               rel2.relative: 0.33 1.0;</div>
<div class="line">            }</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;invert&quot; 1.0;</div>
<div class="line">               inherit: &quot;default&quot; 0.0;</div>
<div class="line">               rel1.relative: 0.0 0.0;</div>
<div class="line">               rel2.relative: 1.0 0.33;</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line"> </div>
<div class="line">         part {</div>
<div class="line">            name: &quot;part_two&quot;;</div>
<div class="line">            type: RECT;</div>
<div class="line">            scale: 1;</div>
<div class="line">            description {</div>
<div class="line">               min: 50 50;</div>
<div class="line">               state: &quot;default&quot; 0.0;</div>
<div class="line">               color: 255 255 0 255; /* yellow */</div>
<div class="line">               rel1.relative: 0.33 0.0;</div>
<div class="line">               rel2.relative: 0.66 1.0;</div>
<div class="line">            }</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;invert&quot; 1.0;</div>
<div class="line">               inherit: &quot;default&quot; 0.0;</div>
<div class="line">               rel1.relative: 0.0 0.66;</div>
<div class="line">               rel2.relative: 1.0 1.0;</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line"> </div>
<div class="line">         part {</div>
<div class="line">            name: &quot;part_three&quot;;</div>
<div class="line">            type: RECT;</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;default&quot; 0.0;</div>
<div class="line">               color: 255 0 0 255; /* red */</div>
<div class="line">               rel1.relative: 0.66 0.0;</div>
<div class="line">               rel2.relative: 1.0 1.0;</div>
<div class="line">            }</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;invert&quot; 1.0;</div>
<div class="line">               inherit: &quot;default&quot; 0.0;</div>
<div class="line">               rel1.relative: 0.0 0.33;</div>
<div class="line">               rel2.relative: 1.0 0.66;</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">      program {</div>
<div class="line">         signal: &quot;load&quot;;</div>
<div class="line">         source: &quot;&quot;;</div>
<div class="line">         in: 2.0 0.0;</div>
<div class="line">         after: &quot;animation,state1&quot;;</div>
<div class="line">      }</div>
<div class="line">      program {</div>
<div class="line">         name: &quot;animation,state1&quot;;</div>
<div class="line">         signal: &quot;animation,start&quot;;</div>
<div class="line">         source: &quot;&quot;;</div>
<div class="line">         in: 1.0 0.0;</div>
<div class="line">         action: STATE_SET &quot;invert&quot; 1.0;</div>
<div class="line">         target: &quot;part_one&quot;;</div>
<div class="line">         target: &quot;part_two&quot;;</div>
<div class="line">         target: &quot;part_three&quot;;</div>
<div class="line">         transition: LINEAR 0.6;</div>
<div class="line">         after: &quot;animation,state2&quot;;</div>
<div class="line">      }</div>
<div class="line">      program {</div>
<div class="line">         name: &quot;animation,state2&quot;;</div>
<div class="line">         signal: &quot;animation,start&quot;;</div>
<div class="line">         source: &quot;&quot;;</div>
<div class="line">         in: 1.0 0.0;</div>
<div class="line">         action: STATE_SET &quot;default&quot; 0.0;</div>
<div class="line">         target: &quot;part_one&quot;;</div>
<div class="line">         target: &quot;part_two&quot;;</div>
<div class="line">         target: &quot;part_three&quot;;</div>
<div class="line">         transition: LINEAR 0.6;</div>
<div class="line">         after: &quot;animation,state1&quot;;</div>
<div class="line">   }</div>
<div class="line">}</div>
</div><!-- fragment --><p>To compile use this command: </p><pre class="fragment">* gcc -o edje-animations edje-animations.c -DPACKAGE_BIN_DIR=\"/Where/enlightenment/is/installed/bin\"
* -DPACKAGE_LIB_DIR=\"/Where/enlightenment/is/installed/lib\"
* -DPACKAGE_DATA_DIR=\"/Where/enlightenment/is/installed/share\"
* `pkg-config --cflags --libs evas ecore ecore-evas edje`
*
* edje_cc animations.edc
* </pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>

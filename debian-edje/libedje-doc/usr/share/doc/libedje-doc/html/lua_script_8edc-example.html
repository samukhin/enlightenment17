<html>
<head>
    <title>lua_script.edc</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Edje Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="Edje__Edit_8h.html">Edje Edit API</a></li>
                <li><a href="Examples.html">Examples</a></li>
                <li><a href="luaref.html">LUA scripting</a></li>
                <li><a href="Edje_8h.html">Edje API</a></li>
                <li><a href="edcref.html">EDC Reference</a></li>
                <li><a href="pages.html">Releted Pages</a></li>
                <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">lua_script.edc</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example show the usage of lua scripting to create and animate some objects in the canvas.</p>
<div class="fragment"><div class="line">color_classes {</div>
<div class="line">    color_class { name: &quot;test_colour&quot;; color: 255 255 255 255; }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">fonts {</div>
<div class="line">   font: &quot;Vera.ttf&quot; &quot;default&quot;;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">images {</div>
<div class="line">    image: &quot;bubble.png&quot; COMP;</div>
<div class="line">    image: &quot;test.png&quot; COMP;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">collections {</div>
<div class="line">   group {</div>
<div class="line">      name: &quot;main&quot;;</div>
<div class="line">      lua_script_only: 1;</div>
<div class="line">      lua_script {</div>
<div class="line">         --// stick object private/local vars here</div>
<div class="line">         local D;</div>
<div class="line">         local count = 0;</div>
<div class="line">         local fndata = 99;</div>
<div class="line">         local text_geom;</div>
<div class="line"> </div>
<div class="line">         --// Functions to print tables.</div>
<div class="line">         local print_table, print_table_start;</div>
<div class="line"> </div>
<div class="line">         function print_table_start(table, space, name)</div>
<div class="line">            print(space .. name .. &quot;: &quot;);</div>
<div class="line">            print(space .. &quot;{&quot;);</div>
<div class="line">            print_table(table, space .. &quot;  &quot;);</div>
<div class="line">            print(space .. &quot;}&quot;);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         function print_table(table, space)</div>
<div class="line">            for k, v in pairs(table) do </div>
<div class="line">               if type(v) == &quot;table&quot; then</div>
<div class="line">                  print_table_start(v, space, k);</div>
<div class="line">               elseif type(v) == &quot;string&quot; then</div>
<div class="line">                  print(space .. k .. &#39;: &quot;&#39; .. v .. &#39;&quot;;&#39;)</div>
<div class="line">               else</div>
<div class="line">                  print(space .. k .. &quot;: &quot; .. v .. &quot;;&quot;)</div>
<div class="line">               end</div>
<div class="line">            end</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         local function mycb3 (v)</div>
<div class="line">            print(&quot;lua::callback transition &quot; .. D.val .. &quot; v: &quot; .. v);</div>
<div class="line">            d = {};</div>
<div class="line">            d = edje.size(d);</div>
<div class="line">            print(&quot;lua::objsize= &quot; .. d.w .. &quot; , &quot; .. d.h);</div>
<div class="line">            sz = {w=v * 80, h=v * 40};</div>
<div class="line">            D.rect:geom(((d.w / 2) * math.sin(v * 2 * math.pi)) + ((d.w - sz.w) / 2),</div>
<div class="line">                        ((d.h / 2) * math.cos(v * 2 * math.pi)) + ((d.h - sz.h) / 2),</div>
<div class="line">                        sz.w, sz.h);</div>
<div class="line">            D.rect:color(255, 128, v * 255, 255);</div>
<div class="line">            d = D.rect:move(d);</div>
<div class="line">            print(&quot;lua::pos= &quot; .. d.x .. &quot; , &quot; .. d.y);</div>
<div class="line"> </div>
<div class="line">            r = D.rect:above();</div>
<div class="line">            if (r ~= nil) then</div>
<div class="line">               print(&quot;lua::rcol&quot;);</div>
<div class="line">               r:color(20, v * 255, 60, 255);</div>
<div class="line">            else</div>
<div class="line">               print(&quot;lua::r none!!!!!!!!!!!!!!1&quot;);</div>
<div class="line">            end</div>
<div class="line">            d = edje.size();</div>
<div class="line">            D.clip:geom(10, 10, d.w - 20, d.h - 20);</div>
<div class="line">            c = D.clip:clipees();</div>
<div class="line">            for i=1,#c,1 do</div>
<div class="line">               d = c[i]:geom();</div>
<div class="line">               print(&quot;lua::&quot; .. i .. &quot; geom = &quot; .. d.x .. &quot;,&quot; .. d.y .. &quot; &quot; .. d.w .. &quot;x&quot; .. d.h);</div>
<div class="line">            end</div>
<div class="line">            return true;  --// repeat the timer</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         local function mycb2 ()</div>
<div class="line">            print(&quot;lua::callback animator &quot; .. count .. &quot; seconds: &quot; .. edje.seconds() .. &quot; looptime: &quot; .. edje.looptime());</div>
<div class="line">            edje.color_class(&quot;test_colour&quot;, 255, (count * 10) % 255, 255, 255);</div>
<div class="line">            edje.text_class(&quot;test_text_class&quot;, &quot;Sans:style=Bold&quot;, ((count * 3) % 100) + 8);</div>
<div class="line">            if (5 &gt; (count % 10)) then</div>
<div class="line">               D.text:font(&quot;default&quot;, 32);</div>
<div class="line">            else</div>
<div class="line">               D.text:font(&quot;Sans:style=Bold&quot;, 32);</div>
<div class="line">            end</div>
<div class="line">            edje_geom = edje.geom();</div>
<div class="line">            text_geom = D.text:geom();</div>
<div class="line">            D.text:move((edje_geom.w - text_geom.w) / 2, (edje_geom.h - text_geom.h) / 8);</div>
<div class="line">            return true;  --// repeat the timer</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         local function mycb ()</div>
<div class="line">            print(&quot;lua::callback timer &quot; .. count .. &quot; fndata = &quot; .. fndata);</div>
<div class="line">            count = count + 1; --// keep count of calls - object data</div>
<div class="line">            fndata = fndata + 3; --// play with object vars to see if they persist</div>
<div class="line">            D.tim = edje.timer(0.25, mycb); --// inside cb add new timer</div>
<div class="line">            return false; --// cease repeating the timer</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         --// init object here</div>
<div class="line">         D = {}; --// data is empty table to start</div>
<div class="line">         D.val = math.random(); --// start with some random value so</div>
<div class="line">         fndata = fndata + D.val; --// func data start point</div>
<div class="line">         print(&quot;lua::init ... &quot; .. D.val);</div>
<div class="line">         edje.echo(&quot;lua::echo(&#39;hello world&#39;)&quot;);</div>
<div class="line"> </div>
<div class="line">         --// How to check the edje version.</div>
<div class="line">         version = edje.version();</div>
<div class="line">         print(&quot;The edje version number is &quot; .. version.major .. &quot;.&quot; .. version.minor);</div>
<div class="line"> </div>
<div class="line">         --// actually add the timer to call mycb in 1.23 sec</div>
<div class="line">         D.tim = edje.timer(1.23, mycb);</div>
<div class="line">         D.tra = edje.transition(5.0, mycb3);</div>
<div class="line">         D.ani = edje.animator(mycb2);</div>
<div class="line">         edje_geom = edje.geom();</div>
<div class="line"> </div>
<div class="line">         if (edje.spanky) then edje.spanky(); end</div>
<div class="line"> </div>
<div class="line">         local date = edje.date();</div>
<div class="line">         print(&quot;lua:: date: &quot; ..</div>
<div class="line">            date.year .. &quot;|&quot; ..</div>
<div class="line">            date.month .. &quot;|&quot; ..</div>
<div class="line">            date.day .. &quot;|&quot; ..</div>
<div class="line">            date.yearday .. &quot;|&quot; ..</div>
<div class="line">            date.weekday .. &quot;|&quot; ..</div>
<div class="line">            date.hour .. &quot;|&quot; ..</div>
<div class="line">            date.min .. &quot;|&quot; ..</div>
<div class="line">            date.sec</div>
<div class="line">         );</div>
<div class="line"> </div>
<div class="line">         --// send some random edje message</div>
<div class="line">         edje.messagesend(7, &quot;none&quot;      );</div>
<div class="line">         edje.messagesend(7, &quot;sig&quot;,      &quot;signal&quot;, &quot;source&quot;);</div>
<div class="line">         edje.messagesend(7, &quot;str&quot;,      &quot;hello world&quot;);</div>
<div class="line">         edje.messagesend(7, &quot;int&quot;,      987);</div>
<div class="line">         edje.messagesend(7, &quot;float&quot;,    987.321);</div>
<div class="line">         edje.messagesend(7, &quot;strset&quot;,   {&quot;hello&quot;, &quot;there&quot;, &quot;world&quot;});</div>
<div class="line">         edje.messagesend(7, &quot;intset&quot;,   {1, 2, 3});</div>
<div class="line">         edje.messagesend(7, &quot;floatset&quot;, {1.1, 2.2, 3.3});</div>
<div class="line">         edje.messagesend(7, &quot;strint&quot;,   &quot;hello world&quot;, 7);</div>
<div class="line">         edje.messagesend(7, &quot;strfloat&quot;, &quot;hello world&quot;, 7.654);</div>
<div class="line">         edje.messagesend(7, &quot;strintset&quot;,&quot;hello world&quot;, {1, 2, 3});</div>
<div class="line"> </div>
<div class="line">         D.edje = edje.edje();</div>
<div class="line">         D.edje:file(&quot;plain/edje/group&quot;);</div>
<div class="line">         D.edje:show();</div>
<div class="line">                  </div>
<div class="line">         D.rect = edje.rect();</div>
<div class="line">         D.rect:geom  (5, 10, 50, 30);</div>
<div class="line">         D.rect:color (255, 128, 60, 255);</div>
<div class="line">         D.rect:show  ();</div>
<div class="line">                  </div>
<div class="line">         D.rect2 = edje.rect();</div>
<div class="line">         D.rect2:geom  (50, 50, 50, 50);</div>
<div class="line">         D.rect2:color (20, 30, 60, 120);</div>
<div class="line">         D.rect2:show  ();</div>
<div class="line"> </div>
<div class="line">         D.clip = edje.rect();</div>
<div class="line">         D.clip:geom  (10, 10, 150, 150);</div>
<div class="line">         D.clip:color (200, 200, 50, 200);</div>
<div class="line">         D.clip:show  ();</div>
<div class="line"> </div>
<div class="line">         D.rect2:clip(D.clip);</div>
<div class="line">         D.rect:clip(D.clip);</div>
<div class="line"> </div>
<div class="line">         D.text = edje.text();</div>
<div class="line">         D.text:geom  (50, 5, 150, 50);</div>
<div class="line">         D.text:color (255, 0, 0, 255);</div>
<div class="line">         D.text:font(&quot;Sans:style=Bold&quot;, 32);</div>
<div class="line">         D.text:text(&quot;Lua rocks!&quot;);</div>
<div class="line">         text_geom = D.text:geom();</div>
<div class="line">         print(D.text:text());</div>
<div class="line">         D.text:show();</div>
<div class="line"> </div>
<div class="line">    --// Put a few bogus API calls here to test the bogus API protection,</div>
<div class="line">    --// If the bogus API protection works, these should get ignored, but everything else runs smoothly.</div>
<div class="line">    --// Otherwise, the map is not done, the bubbles are not done, but the timers keep runinng.</div>
<div class="line">         bogus.failme(1, &quot;two&quot;, D.rect);</div>
<div class="line">         temp = bogus.failme2();</div>
<div class="line">         D.text.bogus();</div>
<div class="line">         edje.bogus2();</div>
<div class="line"> </div>
<div class="line">         --// Fun with maps!</div>
<div class="line">         D.map = edje.map(4);  --// 4 is the only supported map size at the moment.</div>
<div class="line">         --// These all do the same thing.</div>
<div class="line">         --// Note, lua likes to start at 1, C (and thus evas) at 0.  I choose to agree with C.</div>
<div class="line">         D.map:coord(0, 50, 50, 0);</div>
<div class="line">         D.map:coord(1, 100, 50, 0);</div>
<div class="line">         D.map:coord(2, 100, 100, 0);</div>
<div class="line">         D.map:coord(3, 50, 100, 0);</div>
<div class="line">         D.map:populate(50, 50, 50, 50, 0);</div>
<div class="line">         D.map:populate(D.rect2, 0);</div>
<div class="line">         D.map:populate(D.rect2);</div>
<div class="line"> </div>
<div class="line">         --// print the results</div>
<div class="line">         D.coord = D.map:coord(0);</div>
<div class="line">         print(&quot;lua::map coords for point 0 x=&quot; .. D.coord.x .. &quot; y=&quot; .. D.coord.y .. &quot; z=&quot; .. D.coord.z);</div>
<div class="line">         D.coord = D.map:coord(1);</div>
<div class="line">         print(&quot;lua::map coords for point 1 x=&quot; .. D.coord.x .. &quot; y=&quot; .. D.coord.y .. &quot; z=&quot; .. D.coord.z);</div>
<div class="line">         D.coord = D.map:coord(2);</div>
<div class="line">         print(&quot;lua::map coords for point 2 x=&quot; .. D.coord.x .. &quot; y=&quot; .. D.coord.y .. &quot; z=&quot; .. D.coord.z);</div>
<div class="line">         D.coord = D.map:coord(3);</div>
<div class="line">         print(&quot;lua::map coords for point 3 x=&quot; .. D.coord.x .. &quot; y=&quot; .. D.coord.y .. &quot; z=&quot; .. D.coord.z);</div>
<div class="line"> </div>
<div class="line">         D.map:smooth(false);</div>
<div class="line">         D.map:alpha(true);</div>
<div class="line"> </div>
<div class="line">         if (D.map:alpha()) then</div>
<div class="line">            print(&quot;lua::map is alpha&quot;);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         if (D.map:smooth()) then</div>
<div class="line">            print(&quot;lua::map is smooooth&quot;);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         if (D.map:clockwise()) then</div>
<div class="line">            print(&quot;lua::map is clockwise&quot;);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         D.map:color(255, 255, 255, 255); // set all points to this colour.</div>
<div class="line">         D.map:color(1, 255, 0, 255, 255);  // set just one point to this colour.</div>
<div class="line"> </div>
<div class="line">         D.map:lighting(75, 75, 10, 255, 255, 255, 0, 255, 0);  // Ambient light and a 3D light source.</div>
<div class="line"> </div>
<div class="line">         --// Toss it around.</div>
<div class="line">         D.map:rotate(45.0, 75, 75);</div>
<div class="line">         D.map:zoom(1.5, 1.5, 75, 75);</div>
<div class="line">         D.map:rotate3d(10.0, 20.0, 30.0, 75, 75, 0);</div>
<div class="line">         D.map:perspective(200, 200, 0, 20);</div>
<div class="line"> </div>
<div class="line">         --// For image UV mapping.</div>
<div class="line">         D.map:uv(0, 0.0, 0.0);</div>
<div class="line">         D.map:uv(1, 50.0, 0.0);</div>
<div class="line">         D.map:uv(2, 50.0, 50.0);</div>
<div class="line">         D.map:uv(3, 0.0, 50.0);</div>
<div class="line"> </div>
<div class="line">         --// Actually apply the resulting transformations.</div>
<div class="line">         D.rect2:map(D.map);</div>
<div class="line">         D.rect2:map_enable(true);</div>
<div class="line">         if (D.rect2:map_enable()) then</div>
<div class="line">            print(&quot;lua::map enabled&quot;);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         D.rect2:map_source(D.rect);  --// Don&#39;t think this is actually implemented in evas.</div>
<div class="line"> </div>
<div class="line">--//         D.map:dup();</div>
<div class="line">--//         D.map:size();  --// perhaps overide the # operator?  For now it&#39;s only gonna return 4 anyway.</div>
<div class="line"> </div>
<div class="line">         --// example of deleting something</div>
<div class="line">         --// D.tim:del();</div>
<div class="line"> </div>
<div class="line">         --// test the color_class stuff</div>
<div class="line">         colour = edje.color_class(&quot;test_colour&quot;);</div>
<div class="line">         print(&quot;lua::color_class= &quot; .. colour.r .. &quot;,&quot; .. colour.g .. &quot;,&quot; .. colour.b .. &quot;,&quot; .. colour.a);</div>
<div class="line">         colour = edje.color_class(&quot;test_colour&quot;, 32, 64, 255, 128);</div>
<div class="line">         print(&quot;lua::color_class= &quot; .. colour.r .. &quot;,&quot; .. colour.g .. &quot;,&quot; .. colour.b .. &quot;,&quot; .. colour.a);</div>
<div class="line">         colour = edje.color_class(&quot;test_colour&quot;, { r=255, g=0, b=255, a=255 });</div>
<div class="line">         print(&quot;lua::color_class= &quot; .. colour.r .. &quot;,&quot; .. colour.g .. &quot;,&quot; .. colour.b .. &quot;,&quot; .. colour.a);</div>
<div class="line">         text = edje.text_class(&quot;test_text_class&quot;, &quot;Sans:style=Bold&quot;, 8);</div>
<div class="line">         print(&quot;lua::text_class= &quot; .. text.font .. &quot; size &quot; .. text.size);</div>
<div class="line"> </div>
<div class="line">         --// Do something bad, just to see what happens.</div>
<div class="line">--//         edje.color_class(nil);</div>
<div class="line"> </div>
<div class="line">         --// shutdown func - generally empty or not there. everything garbage collected for you</div>
<div class="line">         function shutdown ()</div>
<div class="line">            print(&quot;lua::shutdown ... &quot; .. D.val);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         function show ()</div>
<div class="line">            print(&quot;lua::show ... &quot; .. D.val);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         function hide ()</div>
<div class="line">            print(&quot;lua::hide ... &quot; .. D.val);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         function move (x, y)</div>
<div class="line">            print(&quot;lua::move x=&quot; .. x .. &quot; x=&quot; .. y);</div>
<div class="line">            D.edje:move(0, 0);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         function resize (w, h)</div>
<div class="line">            print(&quot;lua::resize w=&quot; .. w .. &quot; h=&quot; .. h);</div>
<div class="line">            D.text:move((w - text_geom.w) / 2, (h - text_geom.h) / 8);</div>
<div class="line">            D.edje:resize(w, h);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         function message (id, type, ...)</div>
<div class="line">            print(&quot;lua::message id=&quot; .. id .. &quot; type=&quot; .. type);</div>
<div class="line">            --// handle your message type here. check id + type then use the</div>
<div class="line">            --// vararg appropriately. they are the same as the params passed </div>
<div class="line">            --// to edje:messagesend() (if any are passed at all).  Any array</div>
<div class="line">            --// arguments are passed as a single table.</div>
<div class="line"> </div>
<div class="line">            if (&quot;none&quot; == type) then</div>
<div class="line">               print(&quot;lua::message no args&quot;);</div>
<div class="line">            elseif (&quot;strset&quot; == type) then</div>
<div class="line">               strs = ... ;</div>
<div class="line">               print_table_start(strs, &quot;&quot;, &quot;lua::message strings&quot;);</div>
<div class="line">            elseif (&quot;intset&quot; == type) then</div>
<div class="line">               ints = ... ;</div>
<div class="line">               print_table_start(ints, &quot;&quot;, &quot;lua::message ints&quot;);</div>
<div class="line">            elseif (&quot;floatset&quot; == type) then</div>
<div class="line">               floats = ... ;</div>
<div class="line">               print_table_start(floats, &quot;&quot;, &quot;lua::message floats&quot;);</div>
<div class="line">            elseif (&quot;strintset&quot; == type) then</div>
<div class="line">               str, ints = ... ;</div>
<div class="line">               print(&quot;lua::message &quot; .. str);</div>
<div class="line">               print_table_start(ints, &quot;&quot;, &quot;lua::message ints&quot;);</div>
<div class="line">            elseif (&quot;strfloatset&quot; == type) then</div>
<div class="line">               str, floats = ... ;</div>
<div class="line">               print(&quot;lua::message &quot; .. str);</div>
<div class="line">               print_table_start(floats, &quot;&quot;, &quot;lua::message floats&quot;);</div>
<div class="line">            else</div>
<div class="line">               print(&quot;lua::message &quot; .. ... );</div>
<div class="line">            end</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         function signal (sig, src)</div>
<div class="line">            print(&quot;lua::signal sig= &quot; .. sig .. &quot; src= &quot; .. src);</div>
<div class="line">         end</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   // The group name NEEDS a / in it, </div>
<div class="line">   // or the part below that tries to swallow it won&#39;t work.</div>
<div class="line">   // Leaving just the lua part visible.</div>
<div class="line">   group {</div>
<div class="line">      name: &quot;bubbles/lua&quot;;</div>
<div class="line">      lua_script_only: 1;</div>
<div class="line">      lua_script {</div>
<div class="line">         local bubbles = { };</div>
<div class="line">         local bubbleCols = 8;</div>
<div class="line">         local bubbleRows = 6;</div>
<div class="line"> </div>
<div class="line">         for i = 1, bubbleRows do</div>
<div class="line">            row = { };</div>
<div class="line">            for j = 1, bubbleCols do</div>
<div class="line">               image = edje.image();</div>
<div class="line">               image:image(&quot;bubble.png&quot;);</div>
<div class="line">               image:show();</div>
<div class="line">               table.insert(row, image);</div>
<div class="line">            end</div>
<div class="line">            table.insert(bubbles, row);</div>
<div class="line">         end</div>
<div class="line"> </div>
<div class="line">         function resize (w, h)</div>
<div class="line">            for i = 1, bubbleRows do</div>
<div class="line">               for j = 1, bubbleCols do</div>
<div class="line">                  w1 = w / bubbleCols;</div>
<div class="line">                  h1 = h / bubbleRows;</div>
<div class="line">                  bubbles[i][j]:geom((j - 1) * w1, (i - 1) * h1, w1, h1);</div>
<div class="line">                  if ((1 == i) or (1 == j) or (bubbleRows == i) or (bubbleCols == j)) then</div>
<div class="line">                     bubbles[i][j]:color(0, 255, 0, 200);</div>
<div class="line">                  else</div>
<div class="line">                     bubbles[i][j]:color(math.random(200) + 55, 0, math.random(255) + 55, 200);</div>
<div class="line">                  end</div>
<div class="line">               end</div>
<div class="line">            end</div>
<div class="line">         end</div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   group {</div>
<div class="line">      name: &quot;plain/edje/group&quot;;</div>
<div class="line">      parts {</div>
<div class="line">         part {</div>
<div class="line">            name: &quot;background&quot;;</div>
<div class="line">            type: RECT;</div>
<div class="line">            mouse_events: 0;</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;default&quot; 0.0;</div>
<div class="line">               color: 0 0 0 255;</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line"> </div>
<div class="line">         // A lua group embedded in an edje group.</div>
<div class="line">         part {</div>
<div class="line">            name: &quot;bubbles_lua&quot;;</div>
<div class="line">            type: GROUP;</div>
<div class="line">            source: &quot;bubbles/lua&quot;;</div>
<div class="line">            mouse_events: 0;</div>
<div class="line">            description { state: &quot;default&quot; 0.0; }</div>
<div class="line">         }</div>
<div class="line"> </div>
<div class="line">         part {</div>
<div class="line">            name: &quot;background_image&quot;;</div>
<div class="line">            type: IMAGE;</div>
<div class="line">            mouse_events: 0;</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;default&quot; 0.0;</div>
<div class="line">               aspect_preference: HORIZONTAL;</div>
<div class="line">               color_class: &quot;test_colour&quot;;</div>
<div class="line">               image { normal: &quot;test.png&quot;; }</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line"> </div>
<div class="line">         part {</div>
<div class="line">            name: &quot;some_text&quot;;</div>
<div class="line">            type: TEXT;</div>
<div class="line">            mouse_events: 0;</div>
<div class="line">            description {</div>
<div class="line">               state: &quot;default&quot; 0;</div>
<div class="line">               text</div>
<div class="line">               {</div>
<div class="line">                  text: &quot;This is test text.&quot;;</div>
<div class="line">                  text_class: &quot;test_text_class&quot;;</div>
<div class="line">               }</div>
<div class="line">            }</div>
<div class="line">         }</div>
<div class="line"> </div>
<div class="line">      }</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
</div><!-- fragment --> </div><!-- contents -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>

<html>
<head>
    <title>Mmap Group</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Eina Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="modules.html">Modules</a></li>
                <li><a href="pages.html">Related Pages</a></li>
	        <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Mmap Group</div>  </div>
</div><!--header-->
<div class="contents">

<p>These functions provide helpers for safe mmap handling.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3452104185eaee1f8d9acab09561e037"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Mmap__Group.html#ga3452104185eaee1f8d9acab09561e037">eina_mmap_safety_enabled_set</a> (<a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a> enabled)</td></tr>
<tr class="memdesc:ga3452104185eaee1f8d9acab09561e037"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable or disable safe mmaped IO handling.  <a href="group__Eina__Mmap__Group.html#ga3452104185eaee1f8d9acab09561e037">More...</a><br /></td></tr>
<tr class="separator:ga3452104185eaee1f8d9acab09561e037"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1aee5310614057b6dc62a67564ec6a2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Mmap__Group.html#ga1aee5310614057b6dc62a67564ec6a2a">eina_mmap_safety_enabled_get</a> (void)</td></tr>
<tr class="memdesc:ga1aee5310614057b6dc62a67564ec6a2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the enabled state of mmap safety.  <a href="group__Eina__Mmap__Group.html#ga1aee5310614057b6dc62a67564ec6a2a">More...</a><br /></td></tr>
<tr class="separator:ga1aee5310614057b6dc62a67564ec6a2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions provide helpers for safe mmap handling. </p>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga3452104185eaee1f8d9acab09561e037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3452104185eaee1f8d9acab09561e037">&#9670;&nbsp;</a></span>eina_mmap_safety_enabled_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a> eina_mmap_safety_enabled_set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a>&#160;</td>
          <td class="paramname"><em>enabled</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable or disable safe mmaped IO handling. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">enabled</td><td>The enabled state (to enable, pass <a class="el" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc" title="boolean value TRUE (numerical value 1)">EINA_TRUE</a>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc" title="boolean value TRUE (numerical value 1)">EINA_TRUE</a> on success, <a class="el" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301" title="boolean value FALSE (numerical value 0)">EINA_FALSE</a> on failure.</dd></dl>
<p>This enables (if possible on your platform) a signal handler for SIGBUS, that replaces the "bad page" with a page of 0's (from /dev/zero) if a SIGBUS occurs. This allows for safe mmap() of files that may truncate or from files on devices with IO errors. Normally these cases will result in a SIGBUS being delivered (and termination of your process), but when "mmap safety" is enabled, this will not occur. Instead a page of bytes of the value 0 will replace the "bad page", allowing the process to continue and allow its own parsing error detection to safely abort the operation without the process falling apart.</p>
<p>If you disable mmap safety, the SIGBUS handler will be restored to its default handler. Note that <a class="el" href="group__Eina__File__Group.html#gaa039d89641ecc12e5e77b08379334f27" title="Map all the file to a buffer.">eina_file_map_all()</a> and <a class="el" href="group__Eina__File__Group.html#gae13a7ed65213eec685273a5dea800ac3" title="Map a part of the file.">eina_file_map_new()</a> will automatically enable mmap safety as they provide an mmaped file IO layer, and rely on mmap to not fail for any part of the file.</p>
<p>If you set up your own SIGBUS handler, then this will effectively disable the safe mmap handling and make you liable to crashes on IO to or from such "damaged files" that would take down your process.</p>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

<p class="reference">References <a class="el" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>, <a class="el" href="group__Eina__Log__Group.html#gabdd5fedabf0f175017222bfbc78e86b4">eina_log_domain_register()</a>, and <a class="el" href="group__Eina__Log__Group.html#ga2e33caeeeb6051526c01b7fea4d6c91b">EINA_LOG_ERR</a>.</p>

</div>
</div>
<a id="ga1aee5310614057b6dc62a67564ec6a2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1aee5310614057b6dc62a67564ec6a2a">&#9670;&nbsp;</a></span>eina_mmap_safety_enabled_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a> eina_mmap_safety_enabled_get </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the enabled state of mmap safety. </p>
<dl class="section return"><dt>Returns</dt><dd>The safety state (<a class="el" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc" title="boolean value TRUE (numerical value 1)">EINA_TRUE</a> if enabled)</dd></dl>
<p>This returns the mmap safety state set by <a class="el" href="group__Eina__Mmap__Group.html#ga3452104185eaee1f8d9acab09561e037" title="Enable or disable safe mmaped IO handling.">eina_mmap_safety_enabled_set()</a>. See <a class="el" href="group__Eina__Mmap__Group.html#ga3452104185eaee1f8d9acab09561e037" title="Enable or disable safe mmaped IO handling.">eina_mmap_safety_enabled_set()</a> for more information.</p>
<dl class="section since"><dt>Since</dt><dd>1.1.0 </dd></dl>

</div>
</div>
</div><!-- contents -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="poweredby"><img src="doxygen.png"></td>
      <td>Samsung Electronics is supporting the EFL Documentation Project</td>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>

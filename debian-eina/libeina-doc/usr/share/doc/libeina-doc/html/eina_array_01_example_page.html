<html>
<head>
    <title>Basic array usage</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Eina Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="modules.html">Modules</a></li>
                <li><a href="pages.html">Related Pages</a></li>
	        <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Basic array usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p></p>
<p>For this example we add stdlib.h, stdio.h and string.h for some convenience functions. The first thing to do to be able to use an <a class="el" href="group__Eina__Array__Group.html#ga2a57284ee83a7e767485b7ae2f5df86c">Eina_Array</a> is to include <a class="el" href="Eina_8h.html" title="Eina Utility library.">Eina.h</a>: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Eina_8h.html">Eina.h</a>&gt;</span></div>
<div class="ttc" id="aEina_8h_html"><div class="ttname"><a href="Eina_8h.html">Eina.h</a></div><div class="ttdoc">Eina Utility library.</div></div>
</div><!-- fragment --><p> Here we have a callback that prints the element given to it: </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">static</span> <a class="code" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a></div>
<div class="line">_print(<span class="keyword">const</span> <span class="keywordtype">void</span> *container, <span class="keywordtype">void</span> *data, <span class="keywordtype">void</span> *fdata)</div>
<div class="line">{</div>
<div class="line">  printf(<span class="stringliteral">&quot;%s\n&quot;</span>, (<span class="keywordtype">char</span> *)data);</div>
<div class="line">   <span class="keywordflow">return</span> <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga05c12dacc8b4058994df842b41be85fc"><div class="ttname"><a href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a></div><div class="ttdeci">#define EINA_TRUE</div><div class="ttdoc">boolean value TRUE (numerical value 1)</div><div class="ttdef"><b>Definition:</b> eina_types.h:299</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga3fe0caf72e93b1bab1ca8ee3ccf3f226"><div class="ttname"><a href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a></div><div class="ttdeci">unsigned char Eina_Bool</div><div class="ttdoc">Type to mimic a boolean.</div><div class="ttdef"><b>Definition:</b> eina_types.h:287</div></div>
</div><!-- fragment --><p> Now we create our entry point and declare some variables, nothing especial: </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span>* strings[] = {</div>
<div class="line">      <span class="stringliteral">&quot;helo&quot;</span>, <span class="stringliteral">&quot;hera&quot;</span>, <span class="stringliteral">&quot;starbuck&quot;</span>, <span class="stringliteral">&quot;kat&quot;</span>, <span class="stringliteral">&quot;boomer&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;hotdog&quot;</span>, <span class="stringliteral">&quot;longshot&quot;</span>, <span class="stringliteral">&quot;jammer&quot;</span>, <span class="stringliteral">&quot;crashdown&quot;</span>, <span class="stringliteral">&quot;hardball&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;duck&quot;</span>, <span class="stringliteral">&quot;racetrack&quot;</span>, <span class="stringliteral">&quot;apolo&quot;</span>, <span class="stringliteral">&quot;husker&quot;</span>, <span class="stringliteral">&quot;freaker&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;skulls&quot;</span>, <span class="stringliteral">&quot;bulldog&quot;</span>, <span class="stringliteral">&quot;flat top&quot;</span>, <span class="stringliteral">&quot;hammerhead&quot;</span>, <span class="stringliteral">&quot;gonzo&quot;</span></div>
<div class="line">   };</div>
<div class="line">   <a class="code" href="struct__Eina__Array.html">Eina_Array</a> *array;</div>
<div class="line">   <a class="code" href="group__Eina__Array__Group.html#gaf9af7cd8afa60d6b1cab805bd5b838aa">Eina_Array_Iterator</a> iterator;</div>
<div class="line">   <span class="keywordtype">char</span> *item;</div>
<div class="line">   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gaf9af7cd8afa60d6b1cab805bd5b838aa"><div class="ttname"><a href="group__Eina__Array__Group.html#gaf9af7cd8afa60d6b1cab805bd5b838aa">Eina_Array_Iterator</a></div><div class="ttdeci">void ** Eina_Array_Iterator</div><div class="ttdoc">Type for an iterator on arrays, used with EINA_ARRAY_ITER_NEXT.</div><div class="ttdef"><b>Definition:</b> eina_array.h:226</div></div>
<div class="ttc" id="astruct__Eina__Array_html"><div class="ttname"><a href="struct__Eina__Array.html">_Eina_Array</a></div><div class="ttdoc">Type for an array of data.</div><div class="ttdef"><b>Definition:</b> eina_array.h:233</div></div>
</div><!-- fragment --><p> Before we can start using any array function we need to initialize eina: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Main__Group.html#gafee4bfc0e509b6ffed6598edf6f4b3de">eina_init</a>();</div>
<div class="ttc" id="agroup__Eina__Main__Group_html_gafee4bfc0e509b6ffed6598edf6f4b3de"><div class="ttname"><a href="group__Eina__Main__Group.html#gafee4bfc0e509b6ffed6598edf6f4b3de">eina_init</a></div><div class="ttdeci">int eina_init(void)</div><div class="ttdoc">Initialize the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:244</div></div>
</div><!-- fragment --><p> So now to actually creating our array. The only interesting thing here is the argument given to the <a class="el" href="group__Eina__Array__Group.html#gad671e356ded4049ccff24cc46f6f6f43" title="Create a new array.">eina_array_new()</a> function, this argument sets how fast the array grows. </p><div class="fragment"><div class="line"> </div>
<div class="line">   array = <a class="code" href="group__Eina__Array__Group.html#gad671e356ded4049ccff24cc46f6f6f43">eina_array_new</a>(10);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gad671e356ded4049ccff24cc46f6f6f43"><div class="ttname"><a href="group__Eina__Array__Group.html#gad671e356ded4049ccff24cc46f6f6f43">eina_array_new</a></div><div class="ttdeci">Eina_Array * eina_array_new(unsigned int step)</div><div class="ttdoc">Create a new array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:265</div></div>
</div><!-- fragment --><p> If you know before hand how big the array will need to be you should set the step to that. In our case we can set it to the number of string we have and since we didn't do that in the <a class="el" href="group__Eina__Array__Group.html#gad671e356ded4049ccff24cc46f6f6f43" title="Create a new array.">eina_array_new()</a> we can do it now: </p><div class="fragment"><div class="line">   <a class="code" href="group__Eina__Array__Group.html#gaafbc47b2fb79df3e16555c819339e696">eina_array_step_set</a>(array, <span class="keyword">sizeof</span>(*array), 20);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gaafbc47b2fb79df3e16555c819339e696"><div class="ttname"><a href="group__Eina__Array__Group.html#gaafbc47b2fb79df3e16555c819339e696">eina_array_step_set</a></div><div class="ttdeci">void eina_array_step_set(Eina_Array *array, unsigned int sizeof_eina_array, unsigned int step)</div><div class="ttdoc">Set the step of an array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:299</div></div>
</div><!-- fragment --><p> Now let us populate our array with some strings: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; 20; i++)</div>
<div class="line">     eina_array_push(array, strdup(strings[i]));</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>Notice we use strdup, so we will have to free that memory later on.</dd></dl>
<p>Now lets check the size of the array: </p><div class="fragment"><div class="line"> </div>
<div class="line">   printf(<span class="stringliteral">&quot;array count: %d\n&quot;</span>, eina_array_count(array));</div>
</div><!-- fragment --><p> And now we call a function on every member of our array to print it: </p><div class="fragment"><div class="line">   <a class="code" href="group__Eina__Array__Group.html#ga8de2d191a0fffceb5bdc6376540b8db1">eina_array_foreach</a>(array, _print, NULL);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga8de2d191a0fffceb5bdc6376540b8db1"><div class="ttname"><a href="group__Eina__Array__Group.html#ga8de2d191a0fffceb5bdc6376540b8db1">eina_array_foreach</a></div><div class="ttdeci">static Eina_Bool eina_array_foreach(Eina_Array *array, Eina_Each_Cb cb, void *fdata)</div><div class="ttdoc">Provide a safe way to iterate over an array.</div></div>
</div><!-- fragment --><p> One of the strengths of <a class="el" href="group__Eina__Array__Group.html#ga2a57284ee83a7e767485b7ae2f5df86c">Eina_Array</a> over <a class="el" href="group__Eina__List__Group.html#ga3295e1210efea1fb0fd6acbf3cbc1f29">Eina_List</a> is that it has very fast random access to elements, so this is very efficient: </p><div class="fragment"><div class="line"> </div>
<div class="line">   printf(<span class="stringliteral">&quot;Top gun: %s\n&quot;</span>, (<span class="keywordtype">char</span>*)eina_array_data_get(array, 2));</div>
</div><!-- fragment --><p> And now we free up the memory allocated with the strdup()s: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <span class="keywordflow">while</span> (eina_array_count(array))</div>
<div class="line">     free(eina_array_pop(array));</div>
</div><!-- fragment --><p> And the array memory itself: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Array__Group.html#gaee9eb6a413ab294a5d69771f14cf3543">eina_array_free</a>(array);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gaee9eb6a413ab294a5d69771f14cf3543"><div class="ttname"><a href="group__Eina__Array__Group.html#gaee9eb6a413ab294a5d69771f14cf3543">eina_array_free</a></div><div class="ttdeci">void eina_array_free(Eina_Array *array)</div><div class="ttdoc">Free an array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:289</div></div>
</div><!-- fragment --><p> And finally shutdown eina and exit: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Main__Group.html#ga2c8b4020427108a30c44707af22c99d3">eina_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga2c8b4020427108a30c44707af22c99d3"><div class="ttname"><a href="group__Eina__Main__Group.html#ga2c8b4020427108a30c44707af22c99d3">eina_shutdown</a></div><div class="ttdeci">int eina_shutdown(void)</div><div class="ttdoc">Shut down the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:315</div></div>
</div><!-- fragment --><p> The full source code can be found on the examples folder on the <a class="el" href="eina_array_01_c.html">eina_array_01.c</a> file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="poweredby"><img src="doxygen.png"></td>
      <td>Samsung Electronics is supporting the EFL Documentation Project</td>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>

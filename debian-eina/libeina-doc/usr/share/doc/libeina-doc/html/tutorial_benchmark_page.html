<html>
<head>
    <title>Benchmark Tutorial</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Eina Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="modules.html">Modules</a></li>
                <li><a href="pages.html">Related Pages</a></li>
	        <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Benchmark Tutorial </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Benchmark module allows you to write easily benchmarks framework in a project for timing critical part and detect slow parts of code.</p>
<p>In addition it automatically creates data files of these benchmark, as well as a gnuplot file which can display the comparison curves of the benchmarks.</p>
<h1><a class="anchor" id="tutorial_benchmark_basic_usage"></a>
Basic Usage</h1>
<p>To create a basic benchmark, you have to follow these steps:</p>
<ul>
<li>Create a new benchmark </li>
<li>Write the functions that wraps the functions you want to benchmark. </li>
<li>Register these wrappers functions. </li>
<li>Run the benchmark. </li>
<li>Free the memory.</li>
</ul>
<p>Here is a basic example of benchmark which creates two functions that will be run. These functions just print a message.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Eina_8h.html">Eina.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span></div>
<div class="line"><span class="keywordtype">void</span> work1(<span class="keywordtype">int</span> request)</div>
<div class="line">{</div>
<div class="line">  printf (<span class="stringliteral">&quot;work1 in progress... Request: %d\n&quot;</span>, request);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span></div>
<div class="line"><span class="keywordtype">void</span> work2(<span class="keywordtype">int</span> request)</div>
<div class="line">{</div>
<div class="line">  printf (<span class="stringliteral">&quot;work2 in progress... Request: %d\n&quot;</span>, request);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="group__Eina__Benchmark__Group.html#gac5c05887f0ad72bfb28b53e6fde49ce2">Eina_Benchmark</a> *test;</div>
<div class="line">  <a class="code" href="struct__Eina__Array.html">Eina_Array</a>     *ea;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="code" href="group__Eina__Main__Group.html#gafee4bfc0e509b6ffed6598edf6f4b3de">eina_init</a>())</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"> </div>
<div class="line">  test = <a class="code" href="group__Eina__Benchmark__Group.html#gacd3e2dcff8292721754714125572936a">eina_benchmark_new</a>(<span class="stringliteral">&quot;test&quot;</span>, <span class="stringliteral">&quot;run&quot;</span>);</div>
<div class="line">  <span class="keywordflow">if</span> (!test)</div>
<div class="line">    <span class="keywordflow">goto</span> shutdown_eina;</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="group__Eina__Benchmark__Group.html#gacd15985f85c6cbfe21f7c1c1902dd2b3">eina_benchmark_register</a>(test, <span class="stringliteral">&quot;work-1&quot;</span>, <a class="code" href="group__Eina__Benchmark__Group.html#ga64c3594df1ad868efe1454c34e3e1c37">EINA_BENCHMARK</a>(work1), 200, 300, 10);</div>
<div class="line">  <a class="code" href="group__Eina__Benchmark__Group.html#gacd15985f85c6cbfe21f7c1c1902dd2b3">eina_benchmark_register</a>(test, <span class="stringliteral">&quot;work-2&quot;</span>, <a class="code" href="group__Eina__Benchmark__Group.html#ga64c3594df1ad868efe1454c34e3e1c37">EINA_BENCHMARK</a>(work2), 100, 150, 5);</div>
<div class="line"> </div>
<div class="line">  ea = <a class="code" href="group__Eina__Benchmark__Group.html#ga56b67e26be3cf49cccffa4c148148eaf">eina_benchmark_run</a>(test);</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="group__Eina__Benchmark__Group.html#gac8f2877d714ab6fe90d0fa08f87567c5">eina_benchmark_free</a>(test);</div>
<div class="line">  <a class="code" href="group__Eina__Main__Group.html#ga2c8b4020427108a30c44707af22c99d3">eina_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line"> </div>
<div class="line"> shutdown_eina:</div>
<div class="line">  <a class="code" href="group__Eina__Main__Group.html#ga2c8b4020427108a30c44707af22c99d3">eina_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line">}</div>
<div class="ttc" id="aEina_8h_html"><div class="ttname"><a href="Eina_8h.html">Eina.h</a></div><div class="ttdoc">Eina Utility library.</div></div>
<div class="ttc" id="agroup__Eina__Benchmark__Group_html_ga56b67e26be3cf49cccffa4c148148eaf"><div class="ttname"><a href="group__Eina__Benchmark__Group.html#ga56b67e26be3cf49cccffa4c148148eaf">eina_benchmark_run</a></div><div class="ttdeci">Eina_Array * eina_benchmark_run(Eina_Benchmark *bench)</div><div class="ttdoc">Run the benchmark tests that have been registered.</div><div class="ttdef"><b>Definition:</b> eina_benchmark.c:242</div></div>
<div class="ttc" id="agroup__Eina__Benchmark__Group_html_ga64c3594df1ad868efe1454c34e3e1c37"><div class="ttname"><a href="group__Eina__Benchmark__Group.html#ga64c3594df1ad868efe1454c34e3e1c37">EINA_BENCHMARK</a></div><div class="ttdeci">#define EINA_BENCHMARK(function)</div><div class="ttdoc">cast to an Eina_Benchmark_Specimens.</div><div class="ttdef"><b>Definition:</b> eina_benchmark.h:354</div></div>
<div class="ttc" id="agroup__Eina__Benchmark__Group_html_gac5c05887f0ad72bfb28b53e6fde49ce2"><div class="ttname"><a href="group__Eina__Benchmark__Group.html#gac5c05887f0ad72bfb28b53e6fde49ce2">Eina_Benchmark</a></div><div class="ttdeci">struct _Eina_Benchmark Eina_Benchmark</div><div class="ttdoc">Type for a benchmark.</div><div class="ttdef"><b>Definition:</b> eina_benchmark.h:338</div></div>
<div class="ttc" id="agroup__Eina__Benchmark__Group_html_gac8f2877d714ab6fe90d0fa08f87567c5"><div class="ttname"><a href="group__Eina__Benchmark__Group.html#gac8f2877d714ab6fe90d0fa08f87567c5">eina_benchmark_free</a></div><div class="ttdeci">void eina_benchmark_free(Eina_Benchmark *bench)</div><div class="ttdoc">Free a benchmark object.</div><div class="ttdef"><b>Definition:</b> eina_benchmark.c:176</div></div>
<div class="ttc" id="agroup__Eina__Benchmark__Group_html_gacd15985f85c6cbfe21f7c1c1902dd2b3"><div class="ttname"><a href="group__Eina__Benchmark__Group.html#gacd15985f85c6cbfe21f7c1c1902dd2b3">eina_benchmark_register</a></div><div class="ttdeci">Eina_Bool eina_benchmark_register(Eina_Benchmark *bench, const char *name, Eina_Benchmark_Specimens bench_cb, int count_start, int count_end, int count_step)</div><div class="ttdoc">Add a test to a benchmark.</div><div class="ttdef"><b>Definition:</b> eina_benchmark.c:207</div></div>
<div class="ttc" id="agroup__Eina__Benchmark__Group_html_gacd3e2dcff8292721754714125572936a"><div class="ttname"><a href="group__Eina__Benchmark__Group.html#gacd3e2dcff8292721754714125572936a">eina_benchmark_new</a></div><div class="ttdeci">Eina_Benchmark * eina_benchmark_new(const char *name, const char *run)</div><div class="ttdoc">Create a new array.</div><div class="ttdef"><b>Definition:</b> eina_benchmark.c:157</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga2c8b4020427108a30c44707af22c99d3"><div class="ttname"><a href="group__Eina__Main__Group.html#ga2c8b4020427108a30c44707af22c99d3">eina_shutdown</a></div><div class="ttdeci">int eina_shutdown(void)</div><div class="ttdoc">Shut down the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:315</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_gafee4bfc0e509b6ffed6598edf6f4b3de"><div class="ttname"><a href="group__Eina__Main__Group.html#gafee4bfc0e509b6ffed6598edf6f4b3de">eina_init</a></div><div class="ttdeci">int eina_init(void)</div><div class="ttdoc">Initialize the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:244</div></div>
<div class="ttc" id="astruct__Eina__Array_html"><div class="ttname"><a href="struct__Eina__Array.html">_Eina_Array</a></div><div class="ttdoc">Type for an array of data.</div><div class="ttdef"><b>Definition:</b> eina_array.h:233</div></div>
</div><!-- fragment --><p>As "test", "run" are passed to <a class="el" href="group__Eina__Benchmark__Group.html#gacd3e2dcff8292721754714125572936a" title="Create a new array.">eina_benchmark_new()</a> and as the tests "work-1" and "work-2" are registered, the data files bench_test_run.work-1.data and bench_test_run.work-2.data will be created after the <a class="el" href="group__Eina__Benchmark__Group.html#ga56b67e26be3cf49cccffa4c148148eaf" title="Run the benchmark tests that have been registered.">eina_benchmark_run()</a> call. They contain four columns. The file bench_test_run.work-1.data contains for example:</p>
<div class="fragment"><div class="line"><span class="preprocessor"># specimen      experiment time starting time   ending time</span></div>
<div class="line">200     23632   2852446 2876078</div>
<div class="line">210     6924    2883046 2889970</div>
<div class="line">220     6467    2895962 2902429</div>
<div class="line">230     6508    2908271 2914779</div>
<div class="line">240     6278    2920610 2926888</div>
<div class="line">250     6342    2932830 2939172</div>
<div class="line">260     6252    2944954 2951206</div>
<div class="line">270     6463    2956978 2963441</div>
<div class="line">280     6347    2969548 2975895</div>
<div class="line">290     6457    2981702 2988159</div>
</div><!-- fragment --><p>The first column (specimen) is the integer passed to the work1() function when the test is run. The second column (experiment time) is the time, in nanosecond, that work1() takes. The third and fourth columnd are self-explicit.</p>
<p>You can see that the integer passed work1() starts from 200 and finishes at 290, with a step of 10. These values are computed withe last 3 values passed to <a class="el" href="group__Eina__Benchmark__Group.html#gacd15985f85c6cbfe21f7c1c1902dd2b3" title="Add a test to a benchmark.">eina_benchmark_register()</a>. See the document of that function for the detailed behavior.</p>
<p>The gnuplot file will be named bench_test_run.gnuplot. Just run:</p>
<div class="fragment"><div class="line">gnuplot bench_test_run.gnuplot</div>
</div><!-- fragment --><p>to create the graphic of the comparison curves. The image file is named output_test_run.png.</p>
<h1><a class="anchor" id="tutorial_benchmark_advanced_usage"></a>
More Advanced Usage</h1>
<p>In this section, several test will be created and run. The idea is exactly the same than in the previous section, but with some basic automatic way to run all the benchmarks. The following code benchmarks some Eina converts functions, and some Eina containers types:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;time.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Eina_8h.html">Eina.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> bench_convert(<a class="code" href="group__Eina__Benchmark__Group.html#gac5c05887f0ad72bfb28b53e6fde49ce2">Eina_Benchmark</a> *bench);</div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> bench_container(<a class="code" href="group__Eina__Benchmark__Group.html#gac5c05887f0ad72bfb28b53e6fde49ce2">Eina_Benchmark</a> *bench);</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <span class="keyword">struct </span>_Benchmark_Case Benchmark_Case;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span>_Benchmark_Case</div>
<div class="line">{</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span> *bench_case;</div>
<div class="line">   void (*build)(<a class="code" href="group__Eina__Benchmark__Group.html#gac5c05887f0ad72bfb28b53e6fde49ce2">Eina_Benchmark</a> *bench);</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keyword">const</span> Benchmark_Case benchmarks[] = {</div>
<div class="line">  { <span class="stringliteral">&quot;Bench 1&quot;</span>, bench_convert },</div>
<div class="line">  { <span class="stringliteral">&quot;Bench 2&quot;</span>, bench_container },</div>
<div class="line">  { NULL,      NULL }</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span></div>
<div class="line"><span class="keywordtype">void</span> convert1(<span class="keywordtype">int</span> request)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">char</span> tmp[128];</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">  srand(time(NULL));</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; request; ++i)</div>
<div class="line">    <a class="code" href="group__Eina__Convert__Group.html#ga5e292923035dd6229795f18dce2df671">eina_convert_itoa</a>(rand(), tmp);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span></div>
<div class="line"><span class="keywordtype">void</span> convert2(<span class="keywordtype">int</span> request)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordtype">char</span> tmp[128];</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">  srand(time(NULL));</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; request; ++i)</div>
<div class="line">    <a class="code" href="group__Eina__Convert__Group.html#gabcff6a3b75bf963036b9b0386359417f">eina_convert_xtoa</a>(rand(), tmp);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">bench_convert(<a class="code" href="group__Eina__Benchmark__Group.html#gac5c05887f0ad72bfb28b53e6fde49ce2">Eina_Benchmark</a> *bench)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="group__Eina__Benchmark__Group.html#gacd15985f85c6cbfe21f7c1c1902dd2b3">eina_benchmark_register</a>(bench, <span class="stringliteral">&quot;convert-1&quot;</span>, <a class="code" href="group__Eina__Benchmark__Group.html#ga64c3594df1ad868efe1454c34e3e1c37">EINA_BENCHMARK</a>(convert1), 200, 400, 10);</div>
<div class="line">  <a class="code" href="group__Eina__Benchmark__Group.html#gacd15985f85c6cbfe21f7c1c1902dd2b3">eina_benchmark_register</a>(bench, <span class="stringliteral">&quot;convert-2&quot;</span>, <a class="code" href="group__Eina__Benchmark__Group.html#ga64c3594df1ad868efe1454c34e3e1c37">EINA_BENCHMARK</a>(convert2), 200, 400, 10);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span></div>
<div class="line"><span class="keywordtype">void</span> array(<span class="keywordtype">int</span> request)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="struct__Eina__Array.html">Eina_Array</a> *array;</div>
<div class="line">  <a class="code" href="group__Eina__Array__Group.html#gaf9af7cd8afa60d6b1cab805bd5b838aa">Eina_Array_Iterator</a> it;</div>
<div class="line">  <span class="keywordtype">int</span> *data;</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">  srand(time(NULL));</div>
<div class="line"> </div>
<div class="line">  array = <a class="code" href="group__Eina__Array__Group.html#gad671e356ded4049ccff24cc46f6f6f43">eina_array_new</a>(64);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; request; ++i)</div>
<div class="line">    {</div>
<div class="line">      data = (<span class="keywordtype">int</span> *)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line">      <span class="keywordflow">if</span> (!data) <span class="keywordflow">continue</span>;</div>
<div class="line">      *data = rand();</div>
<div class="line">      eina_array_push(array, data);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="group__Eina__Array__Group.html#ga810ed3618ca03f7d549a1bf2c33b2b6e">EINA_ARRAY_ITER_NEXT</a>(array, i, data, it)</div>
<div class="line">    free(data);</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="group__Eina__Array__Group.html#gaee9eb6a413ab294a5d69771f14cf3543">eina_array_free</a>(array);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span></div>
<div class="line"><span class="keywordtype">void</span> list(<span class="keywordtype">int</span> request)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="struct__Eina__List.html">Eina_List</a> *l = NULL;</div>
<div class="line">  <span class="keywordtype">int</span> *data;</div>
<div class="line">  <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">  srand(time(NULL));</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; request; ++i)</div>
<div class="line">    {</div>
<div class="line">      data = (<span class="keywordtype">int</span> *)malloc(<span class="keyword">sizeof</span>(<span class="keywordtype">int</span>));</div>
<div class="line">      <span class="keywordflow">if</span> (!data) <span class="keywordflow">continue</span>;</div>
<div class="line">      *data = rand();</div>
<div class="line">      l = <a class="code" href="group__Eina__List__Group.html#ga9f35bfc7c5b798014c3e0a74bc6f39ad">eina_list_prepend</a>(l, data);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">while</span> (l)</div>
<div class="line">    {</div>
<div class="line">      free(<a class="code" href="group__Eina__List__Group.html#gaec845f0bfb16a14e8d7f0cd508ca7e9c">eina_list_data_get</a>(l));</div>
<div class="line">      l = <a class="code" href="group__Eina__List__Group.html#ga7edefe0975beecc76c02525fb9200f5a">eina_list_remove_list</a>(l, l);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span></div>
<div class="line">bench_container(<a class="code" href="group__Eina__Benchmark__Group.html#gac5c05887f0ad72bfb28b53e6fde49ce2">Eina_Benchmark</a> *bench)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="group__Eina__Benchmark__Group.html#gacd15985f85c6cbfe21f7c1c1902dd2b3">eina_benchmark_register</a>(bench, <span class="stringliteral">&quot;array&quot;</span>, <a class="code" href="group__Eina__Benchmark__Group.html#ga64c3594df1ad868efe1454c34e3e1c37">EINA_BENCHMARK</a>(array), 200, 300, 10);</div>
<div class="line">  <a class="code" href="group__Eina__Benchmark__Group.html#gacd15985f85c6cbfe21f7c1c1902dd2b3">eina_benchmark_register</a>(bench, <span class="stringliteral">&quot;list&quot;</span>, <a class="code" href="group__Eina__Benchmark__Group.html#ga64c3594df1ad868efe1454c34e3e1c37">EINA_BENCHMARK</a>(list), 200, 300, 10);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="group__Eina__Benchmark__Group.html#gac5c05887f0ad72bfb28b53e6fde49ce2">Eina_Benchmark</a> *test;</div>
<div class="line">  <a class="code" href="struct__Eina__Array.html">Eina_Array</a>     *ea;</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>    i;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (!<a class="code" href="group__Eina__Main__Group.html#gafee4bfc0e509b6ffed6598edf6f4b3de">eina_init</a>())</div>
<div class="line">    <span class="keywordflow">return</span> EXIT_FAILURE;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; benchmarks[i].bench_case != NULL; ++i)</div>
<div class="line">    {</div>
<div class="line">      test = <a class="code" href="group__Eina__Benchmark__Group.html#gacd3e2dcff8292721754714125572936a">eina_benchmark_new</a>(benchmarks[i].bench_case, <span class="stringliteral">&quot;Benchmark example&quot;</span>);</div>
<div class="line">      <span class="keywordflow">if</span> (!test)</div>
<div class="line">        <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">      benchmarks[i].build(test);</div>
<div class="line"> </div>
<div class="line">      ea = <a class="code" href="group__Eina__Benchmark__Group.html#ga56b67e26be3cf49cccffa4c148148eaf">eina_benchmark_run</a>(test);</div>
<div class="line"> </div>
<div class="line">      <a class="code" href="group__Eina__Benchmark__Group.html#gac8f2877d714ab6fe90d0fa08f87567c5">eina_benchmark_free</a>(test);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="group__Eina__Main__Group.html#ga2c8b4020427108a30c44707af22c99d3">eina_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> EXIT_SUCCESS;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga810ed3618ca03f7d549a1bf2c33b2b6e"><div class="ttname"><a href="group__Eina__Array__Group.html#ga810ed3618ca03f7d549a1bf2c33b2b6e">EINA_ARRAY_ITER_NEXT</a></div><div class="ttdeci">#define EINA_ARRAY_ITER_NEXT(array, index, item, iterator)</div><div class="ttdoc">Macro to iterate over an array easily.</div><div class="ttdef"><b>Definition:</b> eina_array.h:431</div></div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gad671e356ded4049ccff24cc46f6f6f43"><div class="ttname"><a href="group__Eina__Array__Group.html#gad671e356ded4049ccff24cc46f6f6f43">eina_array_new</a></div><div class="ttdeci">Eina_Array * eina_array_new(unsigned int step)</div><div class="ttdoc">Create a new array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:265</div></div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gaee9eb6a413ab294a5d69771f14cf3543"><div class="ttname"><a href="group__Eina__Array__Group.html#gaee9eb6a413ab294a5d69771f14cf3543">eina_array_free</a></div><div class="ttdeci">void eina_array_free(Eina_Array *array)</div><div class="ttdoc">Free an array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:289</div></div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gaf9af7cd8afa60d6b1cab805bd5b838aa"><div class="ttname"><a href="group__Eina__Array__Group.html#gaf9af7cd8afa60d6b1cab805bd5b838aa">Eina_Array_Iterator</a></div><div class="ttdeci">void ** Eina_Array_Iterator</div><div class="ttdoc">Type for an iterator on arrays, used with EINA_ARRAY_ITER_NEXT.</div><div class="ttdef"><b>Definition:</b> eina_array.h:226</div></div>
<div class="ttc" id="agroup__Eina__Convert__Group_html_ga5e292923035dd6229795f18dce2df671"><div class="ttname"><a href="group__Eina__Convert__Group.html#ga5e292923035dd6229795f18dce2df671">eina_convert_itoa</a></div><div class="ttdeci">int eina_convert_itoa(int n, char *s)</div><div class="ttdoc">Convert an integer number to a string in decimal base.</div><div class="ttdef"><b>Definition:</b> eina_convert.c:169</div></div>
<div class="ttc" id="agroup__Eina__Convert__Group_html_gabcff6a3b75bf963036b9b0386359417f"><div class="ttname"><a href="group__Eina__Convert__Group.html#gabcff6a3b75bf963036b9b0386359417f">eina_convert_xtoa</a></div><div class="ttdeci">int eina_convert_xtoa(unsigned int n, char *s)</div><div class="ttdoc">Convert an integer number to a string in hexadecimal base.</div><div class="ttdef"><b>Definition:</b> eina_convert.c:195</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga7edefe0975beecc76c02525fb9200f5a"><div class="ttname"><a href="group__Eina__List__Group.html#ga7edefe0975beecc76c02525fb9200f5a">eina_list_remove_list</a></div><div class="ttdeci">Eina_List * eina_list_remove_list(Eina_List *list, Eina_List *remove_list)</div><div class="ttdoc">Remove the specified list node.</div><div class="ttdef"><b>Definition:</b> eina_list.c:720</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_ga9f35bfc7c5b798014c3e0a74bc6f39ad"><div class="ttname"><a href="group__Eina__List__Group.html#ga9f35bfc7c5b798014c3e0a74bc6f39ad">eina_list_prepend</a></div><div class="ttdeci">Eina_List * eina_list_prepend(Eina_List *list, const void *data)</div><div class="ttdoc">Prepends the given data to the given linked list.</div><div class="ttdef"><b>Definition:</b> eina_list.c:560</div></div>
<div class="ttc" id="agroup__Eina__List__Group_html_gaec845f0bfb16a14e8d7f0cd508ca7e9c"><div class="ttname"><a href="group__Eina__List__Group.html#gaec845f0bfb16a14e8d7f0cd508ca7e9c">eina_list_data_get</a></div><div class="ttdeci">static void * eina_list_data_get(const Eina_List *list)</div><div class="ttdoc">Get the list node data member.</div></div>
<div class="ttc" id="astruct__Eina__List_html"><div class="ttname"><a href="struct__Eina__List.html">_Eina_List</a></div><div class="ttdoc">Type for a generic double linked list.</div><div class="ttdef"><b>Definition:</b> eina_list.h:321</div></div>
</div><!-- fragment --><p>gnuplot can be used to see how are performed the convert functions together, as well as how are performed the containers. So it is now easy to see that the hexadecimal convert function is faster than the decimal one, and that arrays are faster than lists.</p>
<p>You can improve all that by executing automatically gnuplot in your program, or integrate the Eina benchmark framework in an autotooled project. See that <a href="http://trac.enlightenment.org/e/wiki/AutotoolsIntegration#Benchmark">page</a> for more informations. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="poweredby"><img src="doxygen.png"></td>
      <td>Samsung Electronics is supporting the EFL Documentation Project</td>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>

<html>
<head>
    <title>Stringshare</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Eina Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="modules.html">Modules</a></li>
                <li><a href="pages.html">Related Pages</a></li>
	        <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Stringshare<div class="ingroups"><a class="el" href="group__Eina__Data__Types__Group.html">Data Types</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>These functions allow you to store a single copy of a string, and use in multiple places throughout your program.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga2b7dc19609a55e630a96cc1396e38a53"><td class="memItemLeft" align="right" valign="top">typedef const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a></td></tr>
<tr class="memdesc:ga2b7dc19609a55e630a96cc1396e38a53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interchangeable with "const char *" but still a good visual hint for the purpose.  <a href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">More...</a><br /></td></tr>
<tr class="separator:ga2b7dc19609a55e630a96cc1396e38a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabe8ecf4121011cb792f36ecd8c44e470"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#gabe8ecf4121011cb792f36ecd8c44e470">eina_stringshare_add_length</a> (const char *str, unsigned int slen)</td></tr>
<tr class="memdesc:gabe8ecf4121011cb792f36ecd8c44e470"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an instance of a string for use in a program.  <a href="group__Eina__Stringshare__Group.html#gabe8ecf4121011cb792f36ecd8c44e470">More...</a><br /></td></tr>
<tr class="separator:gabe8ecf4121011cb792f36ecd8c44e470"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5293082680141132ffcacc28866ef0ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#ga5293082680141132ffcacc28866ef0ef">eina_stringshare_add</a> (const char *str)</td></tr>
<tr class="memdesc:ga5293082680141132ffcacc28866ef0ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an instance of a string for use in a program.  <a href="group__Eina__Stringshare__Group.html#ga5293082680141132ffcacc28866ef0ef">More...</a><br /></td></tr>
<tr class="separator:ga5293082680141132ffcacc28866ef0ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab3507a1373455cac57bf494e776fe4a8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#gab3507a1373455cac57bf494e776fe4a8">eina_stringshare_printf</a> (const char *fmt,...) <a class="el" href="group__Eina__Types__Group.html#ga50265482f1d9b18e4b98e97cfa2c8d05">EINA_PRINTF</a>(1</td></tr>
<tr class="memdesc:gab3507a1373455cac57bf494e776fe4a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an instance of a string for use in a program from a format string.  <a href="group__Eina__Stringshare__Group.html#gab3507a1373455cac57bf494e776fe4a8">More...</a><br /></td></tr>
<tr class="separator:gab3507a1373455cac57bf494e776fe4a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7d32f79c65214efa19b09856a950070"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> <a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#gad7d32f79c65214efa19b09856a950070">eina_stringshare_vprintf</a> (const char *fmt, va_list args)</td></tr>
<tr class="memdesc:gad7d32f79c65214efa19b09856a950070"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an instance of a string for use in a program from a format string.  <a href="group__Eina__Stringshare__Group.html#gad7d32f79c65214efa19b09856a950070">More...</a><br /></td></tr>
<tr class="separator:gad7d32f79c65214efa19b09856a950070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4bc3769aa8d4d33c36b6857af33a810b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#ga4bc3769aa8d4d33c36b6857af33a810b">eina_stringshare_nprintf</a> (unsigned int len, const char *fmt,...) <a class="el" href="group__Eina__Types__Group.html#ga50265482f1d9b18e4b98e97cfa2c8d05">EINA_PRINTF</a>(2</td></tr>
<tr class="memdesc:ga4bc3769aa8d4d33c36b6857af33a810b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve an instance of a string for use in a program from a format string with size limitation.  <a href="group__Eina__Stringshare__Group.html#ga4bc3769aa8d4d33c36b6857af33a810b">More...</a><br /></td></tr>
<tr class="separator:ga4bc3769aa8d4d33c36b6857af33a810b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6f45e4273f13f42e9a3c48435cd03dc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> <a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#gac6f45e4273f13f42e9a3c48435cd03dc">eina_stringshare_ref</a> (<a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *str)</td></tr>
<tr class="memdesc:gac6f45e4273f13f42e9a3c48435cd03dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increment references of the given shared string.  <a href="group__Eina__Stringshare__Group.html#gac6f45e4273f13f42e9a3c48435cd03dc">More...</a><br /></td></tr>
<tr class="separator:gac6f45e4273f13f42e9a3c48435cd03dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga495411b0bc85b9c0d59ec7255a025260"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#ga495411b0bc85b9c0d59ec7255a025260">eina_stringshare_del</a> (<a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *str)</td></tr>
<tr class="memdesc:ga495411b0bc85b9c0d59ec7255a025260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Note that the given string has lost an instance.  <a href="group__Eina__Stringshare__Group.html#ga495411b0bc85b9c0d59ec7255a025260">More...</a><br /></td></tr>
<tr class="separator:ga495411b0bc85b9c0d59ec7255a025260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf316a9f4a787091ee437ec7caf0a5c7b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#gaf316a9f4a787091ee437ec7caf0a5c7b">eina_stringshare_strlen</a> (<a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *str)</td></tr>
<tr class="memdesc:gaf316a9f4a787091ee437ec7caf0a5c7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Note that the given string <b>must</b> be shared.  <a href="group__Eina__Stringshare__Group.html#gaf316a9f4a787091ee437ec7caf0a5c7b">More...</a><br /></td></tr>
<tr class="separator:gaf316a9f4a787091ee437ec7caf0a5c7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga13dba791a752e1c51bddb329213cb060"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__Eina__Stringshare__Group.html#ga13dba791a752e1c51bddb329213cb060">eina_stringshare_dump</a> (void)</td></tr>
<tr class="memdesc:ga13dba791a752e1c51bddb329213cb060"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump the contents of the share_common.  <a href="group__Eina__Stringshare__Group.html#ga13dba791a752e1c51bddb329213cb060">More...</a><br /></td></tr>
<tr class="separator:ga13dba791a752e1c51bddb329213cb060"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e32a137ce8c4cd5f6ec3dbde3dbedd8"><td class="memItemLeft" align="right" valign="top"><a id="ga9e32a137ce8c4cd5f6ec3dbde3dbedd8"></a>
static <a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><b>eina_stringshare_replace</b> (<a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> **p_str, const char *news)</td></tr>
<tr class="separator:ga9e32a137ce8c4cd5f6ec3dbde3dbedd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a159ee804ef7c7a190a37f455ec16c2"><td class="memItemLeft" align="right" valign="top"><a id="ga8a159ee804ef7c7a190a37f455ec16c2"></a>
static <a class="el" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a>&#160;</td><td class="memItemRight" valign="bottom"><b>eina_stringshare_replace_length</b> (<a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> **p_str, const char *news, unsigned int slen)</td></tr>
<tr class="separator:ga8a159ee804ef7c7a190a37f455ec16c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions allow you to store a single copy of a string, and use in multiple places throughout your program. </p>
<p>This is a method to reduce the number of duplicated strings kept in memory. It's pretty common for the same strings to be dynamically allocated repeatedly between applications and libraries, especially in circumstances where you could have multiple copies of a structure that allocates the string. So rather than duplicating and freeing these strings, you request a read-only pointer to an existing string and only incur the overhead of a hash lookup.</p>
<p>It sounds like micro-optimizing, but profiling has shown this can have a significant impact as you scale the number of copies up. It improves string creation/destruction speed, reduces memory use and decreases memory fragmentation, so a win all-around.</p>
<p>Using eina stringshares usually boils down to: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *str = <a class="code" href="group__Eina__Stringshare__Group.html#ga5293082680141132ffcacc28866ef0ef">eina_stringshare_add</a>(<span class="stringliteral">&quot;My string&quot;</span>);</div>
<div class="line">...</div>
<div class="line"><span class="comment">//Use str</span></div>
<div class="line">...</div>
<div class="line"><a class="code" href="group__Eina__Stringshare__Group.html#ga495411b0bc85b9c0d59ec7255a025260">eina_stringshare_del</a>(str);</div>
<div class="ttc" id="agroup__Eina__Stringshare__Group_html_ga495411b0bc85b9c0d59ec7255a025260"><div class="ttname"><a href="group__Eina__Stringshare__Group.html#ga495411b0bc85b9c0d59ec7255a025260">eina_stringshare_del</a></div><div class="ttdeci">void eina_stringshare_del(Eina_Stringshare *str)</div><div class="ttdoc">Note that the given string has lost an instance.</div><div class="ttdef"><b>Definition:</b> eina_stringshare.c:577</div></div>
<div class="ttc" id="agroup__Eina__Stringshare__Group_html_ga5293082680141132ffcacc28866ef0ef"><div class="ttname"><a href="group__Eina__Stringshare__Group.html#ga5293082680141132ffcacc28866ef0ef">eina_stringshare_add</a></div><div class="ttdeci">Eina_Stringshare * eina_stringshare_add(const char *str)</div><div class="ttdoc">Retrieve an instance of a string for use in a program.</div><div class="ttdef"><b>Definition:</b> eina_stringshare.c:635</div></div>
</div><!-- fragment --> <dl class="section note"><dt>Note</dt><dd>It's very important to note that string shares are <b><code>const</code>,</b> changing them will result in undefined behavior. </dd>
<dd>
<a class="el" href="group__Eina__Stringshare__Group.html#ga495411b0bc85b9c0d59ec7255a025260" title="Note that the given string has lost an instance.">eina_stringshare_del()</a> <b>doesn't</b> guarantee the string share will be freed, it releases a reference to it, but if other references to it still exist the string share will live until those are released.</dd></dl>
<p>The following diagram gives an idea of what happens as you create strings with <a class="el" href="group__Eina__Stringshare__Group.html#ga5293082680141132ffcacc28866ef0ef" title="Retrieve an instance of a string for use in a program.">eina_stringshare_add()</a>:</p>
<div class="image">
<img src="eina_stringshare.png" alt=""/>
</div>
 <p>For more information, see <a class="el" href="eina_stringshare_example_01_page.html">this example</a>. </p>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="ga2b7dc19609a55e630a96cc1396e38a53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b7dc19609a55e630a96cc1396e38a53">&#9670;&nbsp;</a></span>Eina_Stringshare</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Interchangeable with "const char *" but still a good visual hint for the purpose. </p>
<p>Maybe in the far far future we'll even add strict type checking.</p>
<dl class="section since"><dt>Since</dt><dd>1.2.0 </dd></dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabe8ecf4121011cb792f36ecd8c44e470"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabe8ecf4121011cb792f36ecd8c44e470">&#9670;&nbsp;</a></span>eina_stringshare_add_length()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a>* eina_stringshare_add_length </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>slen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve an instance of a string for use in a program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>The string to retrieve an instance of. </td></tr>
    <tr><td class="paramname">slen</td><td>The string size (&lt;= strlen(str)). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an instance of the string on success. <code>NULL</code> on failure.</dd></dl>
<p>This function retrieves an instance of <code>str</code>. If <code>str</code> is <code>NULL</code>, then <code>NULL</code> is returned. If <code>str</code> is already stored, it is just returned and its reference counter is increased. Otherwise a duplicated string of <code>str</code> is returned.</p>
<p>This function does not check string size, but uses the exact given size. This can be used to share_common part of a larger buffer or substring.</p>
<dl class="section see"><dt>See also</dt><dd>eina_share_common_add() </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="eina_stringshare_01_8c-example.html#a1">eina_stringshare_01.c</a>.</dd>
</dl>

<p class="reference">Referenced by <a class="el" href="group__Eina__Stringshare__Group.html#ga5293082680141132ffcacc28866ef0ef">eina_stringshare_add()</a>, and <a class="el" href="group__Eina__Stringshare__Group.html#gad7d32f79c65214efa19b09856a950070">eina_stringshare_vprintf()</a>.</p>

</div>
</div>
<a id="ga5293082680141132ffcacc28866ef0ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5293082680141132ffcacc28866ef0ef">&#9670;&nbsp;</a></span>eina_stringshare_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a>* eina_stringshare_add </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve an instance of a string for use in a program. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>The NULL-terminated string to retrieve an instance of. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an instance of the string on success. <code>NULL</code> on failure.</dd></dl>
<p>This function retrieves an instance of <code>str</code>. If <code>str</code> is <code>NULL</code>, then <code>NULL</code> is returned. If <code>str</code> is already stored, it is just returned and its reference counter is increased. Otherwise a duplicated string of <code>str</code> is returned.</p>
<p>The string <code>str</code> must be NULL terminated ('\0') and its full length will be used. To use part of the string or non-null terminated, use <a class="el" href="group__Eina__Stringshare__Group.html#gabe8ecf4121011cb792f36ecd8c44e470" title="Retrieve an instance of a string for use in a program.">eina_stringshare_add_length()</a> instead.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Eina__Stringshare__Group.html#gabe8ecf4121011cb792f36ecd8c44e470" title="Retrieve an instance of a string for use in a program.">eina_stringshare_add_length()</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="eina_hash_02_8c-example.html#a3">eina_hash_02.c</a>, <a class="el" href="eina_list_04_8c-example.html#a3">eina_list_04.c</a>, and <a class="el" href="eina_stringshare_01_8c-example.html#a6">eina_stringshare_01.c</a>.</dd>
</dl>

<p class="reference">References <a class="el" href="group__Eina__Stringshare__Group.html#gabe8ecf4121011cb792f36ecd8c44e470">eina_stringshare_add_length()</a>.</p>

</div>
</div>
<a id="gab3507a1373455cac57bf494e776fe4a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab3507a1373455cac57bf494e776fe4a8">&#9670;&nbsp;</a></span>eina_stringshare_printf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a>* eina_stringshare_printf </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve an instance of a string for use in a program from a format string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmt</td><td>The NULL-terminated format string to retrieve an instance of. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an instance of the string on success. <code>NULL</code> on failure.</dd></dl>
<p>This function retrieves an instance of <code>fmt</code>. If <code>fmt</code> is <code>NULL</code>, then <code>NULL</code> is returned. If <code>fmt</code> is already stored, it is just returned and its reference counter is increased. Otherwise a duplicated string is returned.</p>
<p>The format string <code>fmt</code> must be NULL-terminated ('\0') and its full length will be used. To use part of the format string or non-null terminated, use <a class="el" href="group__Eina__Stringshare__Group.html#ga4bc3769aa8d4d33c36b6857af33a810b" title="Retrieve an instance of a string for use in a program from a format string with size limitation.">eina_stringshare_nprintf()</a> instead.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Eina__Stringshare__Group.html#ga4bc3769aa8d4d33c36b6857af33a810b" title="Retrieve an instance of a string for use in a program from a format string with size limitation.">eina_stringshare_nprintf()</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="eina_stringshare_01_8c-example.html#a4">eina_stringshare_01.c</a>.</dd>
</dl>

</div>
</div>
<a id="gad7d32f79c65214efa19b09856a950070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7d32f79c65214efa19b09856a950070">&#9670;&nbsp;</a></span>eina_stringshare_vprintf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> <a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a>* eina_stringshare_vprintf </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>args</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve an instance of a string for use in a program from a format string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">fmt</td><td>The NULL-terminated format string to retrieve an instance of. </td></tr>
    <tr><td class="paramname">args</td><td>The va_args for <code>fmt</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an instance of the string on success. <code>NULL</code> on failure.</dd></dl>
<p>This function retrieves an instance of <code>fmt</code> with <code>args</code>. If <code>fmt</code> is <code>NULL</code>, then <code>NULL</code> is returned. If <code>fmt</code> with <code>args</code> is already stored, it is just returned and its reference counter is increased. Otherwise a duplicated string is returned.</p>
<p>The format string <code>fmt</code> must be NULL-terminated ('\0') and its full length will be used. To use part of the format string or non-null terminated, use <a class="el" href="group__Eina__Stringshare__Group.html#ga4bc3769aa8d4d33c36b6857af33a810b" title="Retrieve an instance of a string for use in a program from a format string with size limitation.">eina_stringshare_nprintf()</a> instead.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Eina__Stringshare__Group.html#ga4bc3769aa8d4d33c36b6857af33a810b" title="Retrieve an instance of a string for use in a program from a format string with size limitation.">eina_stringshare_nprintf()</a> </dd></dl>

<p class="reference">References <a class="el" href="group__Eina__Stringshare__Group.html#gabe8ecf4121011cb792f36ecd8c44e470">eina_stringshare_add_length()</a>.</p>

</div>
</div>
<a id="ga4bc3769aa8d4d33c36b6857af33a810b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4bc3769aa8d4d33c36b6857af33a810b">&#9670;&nbsp;</a></span>eina_stringshare_nprintf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a>* eina_stringshare_nprintf </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve an instance of a string for use in a program from a format string with size limitation. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">len</td><td>The length of the format string to use </td></tr>
    <tr><td class="paramname">fmt</td><td>The format string to retrieve an instance of. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an instance of the string on success. <code>NULL</code> on failure.</dd></dl>
<p>This function retrieves an instance of <code>fmt</code> limited by <code>len</code>. If <code>fmt</code> is <code>NULL</code> or <code>len</code> is &lt; 1, then <code>NULL</code> is returned. If the resulting string is already stored, it is returned and its reference counter is increased. Otherwise a duplicated string is returned.</p>
<p><code>len</code> length of the format string will be used. To use the entire format string, use <a class="el" href="group__Eina__Stringshare__Group.html#gab3507a1373455cac57bf494e776fe4a8" title="Retrieve an instance of a string for use in a program from a format string.">eina_stringshare_printf()</a> instead.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__Eina__Stringshare__Group.html#gab3507a1373455cac57bf494e776fe4a8" title="Retrieve an instance of a string for use in a program from a format string.">eina_stringshare_printf()</a> </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="eina_stringshare_01_8c-example.html#a5">eina_stringshare_01.c</a>.</dd>
</dl>

</div>
</div>
<a id="gac6f45e4273f13f42e9a3c48435cd03dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6f45e4273f13f42e9a3c48435cd03dc">&#9670;&nbsp;</a></span>eina_stringshare_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> <a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a>* eina_stringshare_ref </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Increment references of the given shared string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>The shared string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to an instance of the string on success. <code>NULL</code> on failure.</dd></dl>
<p>This is similar to eina_share_common_add(), but it's faster since it will avoid lookups if possible, but on the down side it requires the parameter to be shared string. In other words, it must be the return of a previous call to one of the stringshare functions.</p>
<p>There is no unref since this is the work of eina_share_common_del(). </p>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="eina_stringshare_01_8c-example.html#a7">eina_stringshare_01.c</a>.</dd>
</dl>

</div>
</div>
<a id="ga495411b0bc85b9c0d59ec7255a025260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga495411b0bc85b9c0d59ec7255a025260">&#9670;&nbsp;</a></span>eina_stringshare_del()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eina_stringshare_del </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Note that the given string has lost an instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>string The given string.</td></tr>
  </table>
  </dd>
</dl>
<p>This function decreases the reference counter associated to <code>str</code> if it exists. If that counter reaches 0, the memory associated to <code>str</code> is freed. If <code>str</code> is <code>NULL</code>, the function returns immediately.</p>
<dl class="section note"><dt>Note</dt><dd>If the given pointer is not shared, bad things will happen, likely a segmentation fault. </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="eina_file_01_8c-example.html#a7">eina_file_01.c</a>, <a class="el" href="eina_hash_02_8c-example.html#a0">eina_hash_02.c</a>, <a class="el" href="eina_list_04_8c-example.html#a10">eina_list_04.c</a>, and <a class="el" href="eina_stringshare_01_8c-example.html#a3">eina_stringshare_01.c</a>.</dd>
</dl>

<p class="reference">Referenced by <a class="el" href="group__Eina__Simple__XML__Group.html#gaaafe18e1332223a16c59a1569553eed1">eina_simple_xml_attribute_free()</a>.</p>

</div>
</div>
<a id="gaf316a9f4a787091ee437ec7caf0a5c7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf316a9f4a787091ee437ec7caf0a5c7b">&#9670;&nbsp;</a></span>eina_stringshare_strlen()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int eina_stringshare_strlen </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__Eina__Stringshare__Group.html#ga2b7dc19609a55e630a96cc1396e38a53">Eina_Stringshare</a> *&#160;</td>
          <td class="paramname"><em>str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Note that the given string <b>must</b> be shared. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">str</td><td>the shared string to know the length. It is safe to give <code>NULL</code>, in that case <code>0</code> is returned. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of a shared string.</dd></dl>
<p>This function is a cheap way to known the length of a shared string.</p>
<dl class="section note"><dt>Note</dt><dd>If the given pointer is not shared, bad things will happen, likely a segmentation fault. If in doubt, try strlen(). </dd></dl>
<dl class="section examples"><dt>Examples</dt><dd><a class="el" href="eina_stringshare_01_8c-example.html#a2">eina_stringshare_01.c</a>.</dd>
</dl>

</div>
</div>
<a id="ga13dba791a752e1c51bddb329213cb060"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga13dba791a752e1c51bddb329213cb060">&#9670;&nbsp;</a></span>eina_stringshare_dump()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eina_stringshare_dump </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dump the contents of the share_common. </p>
<p>This function dumps all strings in the share_common to stdout with a DDD: prefix per line and a memory usage summary. </p>

</div>
</div>
</div><!-- contents -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="poweredby"><img src="doxygen.png"></td>
      <td>Samsung Electronics is supporting the EFL Documentation Project</td>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>

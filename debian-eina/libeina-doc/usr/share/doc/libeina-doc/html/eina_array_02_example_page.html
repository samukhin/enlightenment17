<html>
<head>
    <title>Removing array elements</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Eina Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="modules.html">Modules</a></li>
                <li><a href="pages.html">Related Pages</a></li>
	        <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Removing array elements </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p></p>
<p>Just the usual includes: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="Eina_8h.html">Eina.h</a>&gt;</span></div>
<div class="ttc" id="aEina_8h_html"><div class="ttname"><a href="Eina_8h.html">Eina.h</a></div><div class="ttdoc">Eina Utility library.</div></div>
</div><!-- fragment --><p> This the callback we are going to use to decide which strings stay on the array and which will be removed, we use something simple, but this can be as complex as you like: </p><div class="fragment"><div class="line"> </div>
<div class="line"><a class="code" href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a> keep(<span class="keywordtype">void</span> *data, <span class="keywordtype">void</span> *gdata)</div>
<div class="line">{</div>
<div class="line">   <span class="keywordflow">if</span> (strlen((<span class="keyword">const</span> <span class="keywordtype">char</span>*)data) &lt;= 5)</div>
<div class="line">      <span class="keywordflow">return</span> <a class="code" href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a>;</div>
<div class="line">   <span class="keywordflow">return</span> <a class="code" href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a>;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga05c12dacc8b4058994df842b41be85fc"><div class="ttname"><a href="group__Eina__Types__Group.html#ga05c12dacc8b4058994df842b41be85fc">EINA_TRUE</a></div><div class="ttdeci">#define EINA_TRUE</div><div class="ttdoc">boolean value TRUE (numerical value 1)</div><div class="ttdef"><b>Definition:</b> eina_types.h:299</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga1feb115f8e9913e806e090d9bd5a7301"><div class="ttname"><a href="group__Eina__Types__Group.html#ga1feb115f8e9913e806e090d9bd5a7301">EINA_FALSE</a></div><div class="ttdeci">#define EINA_FALSE</div><div class="ttdoc">boolean value FALSE (numerical value 0)</div><div class="ttdef"><b>Definition:</b> eina_types.h:293</div></div>
<div class="ttc" id="agroup__Eina__Types__Group_html_ga3fe0caf72e93b1bab1ca8ee3ccf3f226"><div class="ttname"><a href="group__Eina__Types__Group.html#ga3fe0caf72e93b1bab1ca8ee3ccf3f226">Eina_Bool</a></div><div class="ttdeci">unsigned char Eina_Bool</div><div class="ttdoc">Type to mimic a boolean.</div><div class="ttdef"><b>Definition:</b> eina_types.h:287</div></div>
</div><!-- fragment --><p> This is the same code we used before to populate the list with the slight difference of not using strdup: </p><div class="fragment"><div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv)</div>
<div class="line">{</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span>* strs[] = {</div>
<div class="line">      <span class="stringliteral">&quot;one&quot;</span>, <span class="stringliteral">&quot;two&quot;</span>, <span class="stringliteral">&quot;three&quot;</span>, <span class="stringliteral">&quot;four&quot;</span>, <span class="stringliteral">&quot;five&quot;</span>, <span class="stringliteral">&quot;six&quot;</span>, <span class="stringliteral">&quot;seven&quot;</span>, <span class="stringliteral">&quot;eight&quot;</span>, <span class="stringliteral">&quot;nine&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;ten&quot;</span>, <span class="stringliteral">&quot;eleven&quot;</span>, <span class="stringliteral">&quot;twelve&quot;</span>, <span class="stringliteral">&quot;thirteen&quot;</span>, <span class="stringliteral">&quot;fourtenn&quot;</span>, <span class="stringliteral">&quot;fifteen&quot;</span>, <span class="stringliteral">&quot;sixteen&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;seventeen&quot;</span>, <span class="stringliteral">&quot;eighteen&quot;</span>, <span class="stringliteral">&quot;nineteen&quot;</span>, <span class="stringliteral">&quot;twenty&quot;</span></div>
<div class="line">   };</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span>* strings[] = {</div>
<div class="line">      <span class="stringliteral">&quot;helo&quot;</span>, <span class="stringliteral">&quot;hera&quot;</span>, <span class="stringliteral">&quot;starbuck&quot;</span>, <span class="stringliteral">&quot;kat&quot;</span>, <span class="stringliteral">&quot;boomer&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;hotdog&quot;</span>, <span class="stringliteral">&quot;longshot&quot;</span>, <span class="stringliteral">&quot;jammer&quot;</span>, <span class="stringliteral">&quot;crashdown&quot;</span>, <span class="stringliteral">&quot;hardball&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;duck&quot;</span>, <span class="stringliteral">&quot;racetrack&quot;</span>, <span class="stringliteral">&quot;apolo&quot;</span>, <span class="stringliteral">&quot;husker&quot;</span>, <span class="stringliteral">&quot;freaker&quot;</span>,</div>
<div class="line">      <span class="stringliteral">&quot;skulls&quot;</span>, <span class="stringliteral">&quot;bulldog&quot;</span>, <span class="stringliteral">&quot;flat top&quot;</span>, <span class="stringliteral">&quot;hammerhead&quot;</span>, <span class="stringliteral">&quot;gonzo&quot;</span></div>
<div class="line">   };</div>
<div class="line">   <a class="code" href="struct__Eina__Array.html">Eina_Array</a> *array;</div>
<div class="line">   <a class="code" href="group__Eina__Array__Group.html#gaf9af7cd8afa60d6b1cab805bd5b838aa">Eina_Array_Iterator</a> iterator;</div>
<div class="line">   <span class="keyword">const</span> <span class="keywordtype">char</span> *item;</div>
<div class="line">   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i;</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Main__Group.html#gafee4bfc0e509b6ffed6598edf6f4b3de">eina_init</a>();</div>
<div class="line"> </div>
<div class="line">   array = <a class="code" href="group__Eina__Array__Group.html#gad671e356ded4049ccff24cc46f6f6f43">eina_array_new</a>(10);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; 20; i++)</div>
<div class="line">     eina_array_push(array, strs[i]);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gad671e356ded4049ccff24cc46f6f6f43"><div class="ttname"><a href="group__Eina__Array__Group.html#gad671e356ded4049ccff24cc46f6f6f43">eina_array_new</a></div><div class="ttdeci">Eina_Array * eina_array_new(unsigned int step)</div><div class="ttdoc">Create a new array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:265</div></div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gaf9af7cd8afa60d6b1cab805bd5b838aa"><div class="ttname"><a href="group__Eina__Array__Group.html#gaf9af7cd8afa60d6b1cab805bd5b838aa">Eina_Array_Iterator</a></div><div class="ttdeci">void ** Eina_Array_Iterator</div><div class="ttdoc">Type for an iterator on arrays, used with EINA_ARRAY_ITER_NEXT.</div><div class="ttdef"><b>Definition:</b> eina_array.h:226</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_gafee4bfc0e509b6ffed6598edf6f4b3de"><div class="ttname"><a href="group__Eina__Main__Group.html#gafee4bfc0e509b6ffed6598edf6f4b3de">eina_init</a></div><div class="ttdeci">int eina_init(void)</div><div class="ttdoc">Initialize the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:244</div></div>
<div class="ttc" id="astruct__Eina__Array_html"><div class="ttname"><a href="struct__Eina__Array.html">_Eina_Array</a></div><div class="ttdoc">Type for an array of data.</div><div class="ttdef"><b>Definition:</b> eina_array.h:233</div></div>
</div><!-- fragment --><p> So we have added all our elements to the array, but it turns out that is not the elements we wanted, so let's empty the array and add the correct strings: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Array__Group.html#gace3c240bf1eab8aee3897a69555abf94">eina_array_clean</a>(array);</div>
<div class="line">   <span class="keywordflow">for</span> (i = 0; i &lt; 20; i++)</div>
<div class="line">     eina_array_push(array, strings[i]);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gace3c240bf1eab8aee3897a69555abf94"><div class="ttname"><a href="group__Eina__Array__Group.html#gace3c240bf1eab8aee3897a69555abf94">eina_array_clean</a></div><div class="ttdeci">static void eina_array_clean(Eina_Array *array)</div><div class="ttdoc">Clean an array.</div></div>
</div><!-- fragment --><p> It seems we made a little mistake in one of our strings so we need to replace it, here is how: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Array__Group.html#ga3a813776e908340a6663a6f9fdc70baa">eina_array_data_set</a>(array, 17, <span class="stringliteral">&quot;flattop&quot;</span>);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga3a813776e908340a6663a6f9fdc70baa"><div class="ttname"><a href="group__Eina__Array__Group.html#ga3a813776e908340a6663a6f9fdc70baa">eina_array_data_set</a></div><div class="ttdeci">static void eina_array_data_set(const Eina_Array *array, unsigned int idx, const void *data)</div><div class="ttdoc">Set the data at a given position in an array.</div></div>
</div><!-- fragment --><p> Now that there is a populated array we can remove elements from it easily: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Array__Group.html#ga500f0dbc90f7c214f7ff35d6a0f51ca0">eina_array_remove</a>(array, keep, NULL);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga500f0dbc90f7c214f7ff35d6a0f51ca0"><div class="ttname"><a href="group__Eina__Array__Group.html#ga500f0dbc90f7c214f7ff35d6a0f51ca0">eina_array_remove</a></div><div class="ttdeci">Eina_Bool eina_array_remove(Eina_Array *array, Eina_Bool(*keep)(void *data, void *gdata), void *gdata)</div><div class="ttdoc">Rebuild an array by specifying the data to keep.</div><div class="ttdef"><b>Definition:</b> eina_array.c:340</div></div>
</div><!-- fragment --><p> And check that the elements were actually removed: </p><div class="fragment"><div class="line">   <a class="code" href="group__Eina__Array__Group.html#ga810ed3618ca03f7d549a1bf2c33b2b6e">EINA_ARRAY_ITER_NEXT</a>(array, i, item, iterator)</div>
<div class="line">     printf(<span class="stringliteral">&quot;item #%d: %s\n&quot;</span>, i, item);</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_ga810ed3618ca03f7d549a1bf2c33b2b6e"><div class="ttname"><a href="group__Eina__Array__Group.html#ga810ed3618ca03f7d549a1bf2c33b2b6e">EINA_ARRAY_ITER_NEXT</a></div><div class="ttdeci">#define EINA_ARRAY_ITER_NEXT(array, index, item, iterator)</div><div class="ttdoc">Macro to iterate over an array easily.</div><div class="ttdef"><b>Definition:</b> eina_array.h:431</div></div>
</div><!-- fragment --><p> Since this time we didn't use strdup we don't need to free each string: </p><div class="fragment"><div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Array__Group.html#gaee9eb6a413ab294a5d69771f14cf3543">eina_array_free</a>(array);</div>
<div class="line"> </div>
<div class="line">   <a class="code" href="group__Eina__Main__Group.html#ga2c8b4020427108a30c44707af22c99d3">eina_shutdown</a>();</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Array__Group_html_gaee9eb6a413ab294a5d69771f14cf3543"><div class="ttname"><a href="group__Eina__Array__Group.html#gaee9eb6a413ab294a5d69771f14cf3543">eina_array_free</a></div><div class="ttdeci">void eina_array_free(Eina_Array *array)</div><div class="ttdoc">Free an array.</div><div class="ttdef"><b>Definition:</b> eina_array.c:289</div></div>
<div class="ttc" id="agroup__Eina__Main__Group_html_ga2c8b4020427108a30c44707af22c99d3"><div class="ttname"><a href="group__Eina__Main__Group.html#ga2c8b4020427108a30c44707af22c99d3">eina_shutdown</a></div><div class="ttdeci">int eina_shutdown(void)</div><div class="ttdoc">Shut down the Eina library.</div><div class="ttdef"><b>Definition:</b> eina_main.c:315</div></div>
</div><!-- fragment --><p> The full source code can be found on the examples folder on the <a class="el" href="eina_array_02_c.html">eina_array_02.c</a> file. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="poweredby"><img src="doxygen.png"></td>
      <td>Samsung Electronics is supporting the EFL Documentation Project</td>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>

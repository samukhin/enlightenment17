<html>
<head>
    <title>Eina_Inlist basic usage</title>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8">
    <meta name="author" content="Andres Blanc" >
    <link rel="icon" href="img/favicon.png" type="image/x-icon">
    <link rel="shortcut icon" href="img/favicon.png" type="image/x-icon">
    <link rel="icon" href="img/favicon.png" type="image/ico">
    <link rel="shortcut icon" href="img/favicon.png" type="image/ico">
    <link rel="stylesheet" type="text/css" href="e.css">
    <link rel="stylesheet" type="text/css" href="edoxy.css">
</head>
<body>
<div id="container">
<div id="header">
<div class="layout">
    <h1><span>Enlightenment</span></h1>
    <h2><span>Beauty at your fingertips</span></h2>
    <table cellspacing="0" cellpadding="0" width="100%"><tr>
      <td id="header_logo">
        <a href="http://www.enlightenment.org"></a>
      </td>
      <td id="header_menu">
        <table cellspacing="0" cellpadding="0" align="right"><tr>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=home">Home</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=news">News</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=about">About</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=download">Download</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=support">Support</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contribute">Contribute</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=contact">Contact</a></td> 
          <td class="nav_passive"><a class="nav_passive" href="http://trac.enlightenment.org/e">Tracker</a></td>
          <td class="nav_passive"><a class="nav_passive" href="http://www.enlightenment.org/p.php?p=docs">Docs</a></td> 
        </tr></table>          
      </td>
      <td id="header_last"></td>
    </tr></table>
    <div class="doxytitle">
        Eina Documentation <small>at Tue Nov 5 2013</small>
    </div>
    <div class="menu-container">
        <div class="submenu">
            <ul class="current">
                <li><a href="files.html">Files</a></li>
                <li><a href="modules.html">Modules</a></li>
                <li><a href="pages.html">Related Pages</a></li>
	        <li class="current"><a  href="index.html">Main Page</a></li>
            </ul>
        </div>
    </div>
    <div class="clear"></div>
</div>
</div>
<div id="content">
<div class="layout">
<!-- Generated by Doxygen 1.9.1 -->
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Eina_Inlist basic usage </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p></p>
<p>To see the full source for this example, click here: <a class="el" href="eina_inlist_01_c.html">eina_inlist_01.c Eina_Inlist basic usage source</a></p>
<p>As explained before, inline lists mean its nodes pointers are part of same memory block/blob. This is done by using the macro <a class="el" href="group__Eina__Inline__List__Group.html#gab30a76fcfa50307c797491705d60136a">EINA_INLIST</a> inside the data structure that will be used:</p>
<div class="fragment"><div class="line"><span class="keyword">struct </span>my_struct {</div>
<div class="line">     <a class="code" href="group__Eina__Inline__List__Group.html#gab30a76fcfa50307c797491705d60136a">EINA_INLIST</a>;</div>
<div class="line">     <span class="keywordtype">int</span> a, b;</div>
<div class="line">};</div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_gab30a76fcfa50307c797491705d60136a"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#gab30a76fcfa50307c797491705d60136a">EINA_INLIST</a></div><div class="ttdeci">#define EINA_INLIST</div><div class="ttdoc">Used for declaring an inlist member in a struct.</div><div class="ttdef"><b>Definition:</b> eina_inlist.h:413</div></div>
</div><!-- fragment --><p> The resulting node representing this struct can be exemplified by the following picture:</p>
<div class="image">
<img src="eina_inlist-node_eg1-my-struct.png" alt=""/>
</div>
  <p>Let's define a comparison function that will be used later during the sorting of the list:</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span></div>
<div class="line">sort_cb(<span class="keyword">const</span> <span class="keywordtype">void</span> *d1, <span class="keyword">const</span> <span class="keywordtype">void</span> *d2)</div>
<div class="line">{</div>
<div class="line">   <span class="keyword">const</span> <a class="code" href="struct__Eina__Inlist.html">Eina_Inlist</a> *l1, *l2;</div>
<div class="line">   <span class="keyword">const</span> <span class="keyword">struct </span>my_struct *x1, *x2;</div>
<div class="line"> </div>
<div class="line">   l1 = d1;</div>
<div class="line">   l2 = d2;</div>
<div class="line"> </div>
<div class="line">   x1 = <a class="code" href="group__Eina__Inline__List__Group.html#ga8c4e6011e7caa9ec5c22b003c4950338">EINA_INLIST_CONTAINER_GET</a>(l1, <span class="keyword">struct</span> my_struct);</div>
<div class="line">   x2 = <a class="code" href="group__Eina__Inline__List__Group.html#ga8c4e6011e7caa9ec5c22b003c4950338">EINA_INLIST_CONTAINER_GET</a>(l2, <span class="keyword">struct</span> my_struct);</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">return</span> x1-&gt;a - x2-&gt;a;</div>
<div class="line">}</div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_ga8c4e6011e7caa9ec5c22b003c4950338"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#ga8c4e6011e7caa9ec5c22b003c4950338">EINA_INLIST_CONTAINER_GET</a></div><div class="ttdeci">#define EINA_INLIST_CONTAINER_GET(ptr, type)</div><div class="ttdoc">Utility macro to get the container object of an inlist.</div><div class="ttdef"><b>Definition:</b> eina_inlist.h:417</div></div>
<div class="ttc" id="astruct__Eina__Inlist_html"><div class="ttname"><a href="struct__Eina__Inlist.html">_Eina_Inlist</a></div><div class="ttdoc">Inlined list type.</div><div class="ttdef"><b>Definition:</b> eina_inlist.h:407</div></div>
</div><!-- fragment --><p> The <a class="el" href="group__Eina__Inline__List__Group.html#gad93973c87f867f249482e936797096ad">Eina_Inlist</a> can be used exactly the same way as <a class="el" href="group__Eina__List__Group.html#ga3295e1210efea1fb0fd6acbf3cbc1f29">Eina_List</a> when appending, prepending and removing items. But since we already have the node pointers inside the structure, they need to be retrieved with the macro <a class="el" href="group__Eina__Inline__List__Group.html#ga5bc991428e75557c6195f6b9e38321fb">EINA_INLIST_GET</a> :</p>
<div class="fragment"><div class="line">   d = malloc(<span class="keyword">sizeof</span>(*d));</div>
<div class="line">   d-&gt;a = 1;</div>
<div class="line">   d-&gt;b = 10;</div>
<div class="line">   list = <a class="code" href="group__Eina__Inline__List__Group.html#ga095c6abf8b0122e30271ce98c26c0524">eina_inlist_append</a>(NULL, <a class="code" href="group__Eina__Inline__List__Group.html#ga5bc991428e75557c6195f6b9e38321fb">EINA_INLIST_GET</a>(d));</div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_ga095c6abf8b0122e30271ce98c26c0524"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#ga095c6abf8b0122e30271ce98c26c0524">eina_inlist_append</a></div><div class="ttdeci">Eina_Inlist * eina_inlist_append(Eina_Inlist *in_list, Eina_Inlist *in_item)</div><div class="ttdoc">Add a new node to end of a list.</div><div class="ttdef"><b>Definition:</b> eina_inlist.c:222</div></div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_ga5bc991428e75557c6195f6b9e38321fb"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#ga5bc991428e75557c6195f6b9e38321fb">EINA_INLIST_GET</a></div><div class="ttdeci">#define EINA_INLIST_GET(Inlist)</div><div class="ttdoc">Utility macro to get the inlist object of a struct.</div><div class="ttdef"><b>Definition:</b> eina_inlist.h:415</div></div>
</div><!-- fragment --><p> Notice that <a class="el" href="group__Eina__Inline__List__Group.html#ga095c6abf8b0122e30271ce98c26c0524">eina_inlist_append</a> always receives the head of the list as first argument, and its return value should be used as the list pointer (head):</p>
<div class="fragment"><div class="line">   d = malloc(<span class="keyword">sizeof</span>(*d));</div>
<div class="line">   d-&gt;a = 2;</div>
<div class="line">   d-&gt;b = 20;</div>
<div class="line">   list = <a class="code" href="group__Eina__Inline__List__Group.html#ga095c6abf8b0122e30271ce98c26c0524">eina_inlist_append</a>(list, <a class="code" href="group__Eina__Inline__List__Group.html#ga5bc991428e75557c6195f6b9e38321fb">EINA_INLIST_GET</a>(d));</div>
</div><!-- fragment --><p> After appending 3 items, the list now should look similar to this:</p>
<div class="image">
<img src="eina_inlist-node_eg1-inlist.png" alt=""/>
</div>
  <p>The macro <a class="el" href="group__Eina__Inline__List__Group.html#gaf5bcbe1bcf9665850477b7cb003f2d2a">EINA_INLIST_FOREACH</a> can be used to iterate over the list:</p>
<div class="fragment"><div class="line">   printf(<span class="stringliteral">&quot;list=%p\n&quot;</span>, list);</div>
<div class="line">   <a class="code" href="group__Eina__Inline__List__Group.html#gaf5bcbe1bcf9665850477b7cb003f2d2a">EINA_INLIST_FOREACH</a>(list, cur)</div>
<div class="line">     printf(<span class="stringliteral">&quot;\ta=%d, b=%d\n&quot;</span>, cur-&gt;a, cur-&gt;b);</div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_gaf5bcbe1bcf9665850477b7cb003f2d2a"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#gaf5bcbe1bcf9665850477b7cb003f2d2a">EINA_INLIST_FOREACH</a></div><div class="ttdeci">#define EINA_INLIST_FOREACH(list, l)</div><div class="ttdoc">Macro to iterate over an inlist.</div><div class="ttdef"><b>Definition:</b> eina_inlist.h:794</div></div>
</div><!-- fragment --><p> <a class="el" href="group__Eina__Inline__List__Group.html#gaaad2933c1da2d5f11a07d7c259df89fe">eina_inlist_promote()</a>, <a class="el" href="group__Eina__Inline__List__Group.html#gabea5613e6992fb5bc07271c999f439e0">eina_inlist_demote()</a>, <a class="el" href="group__Eina__Inline__List__Group.html#ga188a035d7159c3856d8b608187064534">eina_inlist_append_relative()</a> and similar functions all work in the same way as the <a class="el" href="group__Eina__List__Group.html#ga3295e1210efea1fb0fd6acbf3cbc1f29">Eina_List</a> :</p>
<div class="fragment"><div class="line">   list = <a class="code" href="group__Eina__Inline__List__Group.html#gaaad2933c1da2d5f11a07d7c259df89fe">eina_inlist_promote</a>(list, <a class="code" href="group__Eina__Inline__List__Group.html#ga5bc991428e75557c6195f6b9e38321fb">EINA_INLIST_GET</a>(d));</div>
<div class="line"> </div>
<div class="line">   d = malloc(<span class="keyword">sizeof</span>(*d));</div>
<div class="line">   d-&gt;a = 4;</div>
<div class="line">   d-&gt;b = 40;</div>
<div class="line">   list = <a class="code" href="group__Eina__Inline__List__Group.html#ga188a035d7159c3856d8b608187064534">eina_inlist_append_relative</a>(list, <a class="code" href="group__Eina__Inline__List__Group.html#ga5bc991428e75557c6195f6b9e38321fb">EINA_INLIST_GET</a>(d), list);</div>
<div class="line"> </div>
<div class="line">   list = <a class="code" href="group__Eina__Inline__List__Group.html#gabea5613e6992fb5bc07271c999f439e0">eina_inlist_demote</a>(list, <a class="code" href="group__Eina__Inline__List__Group.html#ga5bc991428e75557c6195f6b9e38321fb">EINA_INLIST_GET</a>(d));</div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_ga188a035d7159c3856d8b608187064534"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#ga188a035d7159c3856d8b608187064534">eina_inlist_append_relative</a></div><div class="ttdeci">Eina_Inlist * eina_inlist_append_relative(Eina_Inlist *in_list, Eina_Inlist *in_item, Eina_Inlist *in_relative)</div><div class="ttdoc">Add a new node after the given relative item in list.</div><div class="ttdef"><b>Definition:</b> eina_inlist.c:269</div></div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_gaaad2933c1da2d5f11a07d7c259df89fe"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#gaaad2933c1da2d5f11a07d7c259df89fe">eina_inlist_promote</a></div><div class="ttdeci">Eina_Inlist * eina_inlist_promote(Eina_Inlist *list, Eina_Inlist *item)</div><div class="ttdoc">Move existing node to beginning of list.</div><div class="ttdef"><b>Definition:</b> eina_inlist.c:368</div></div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_gabea5613e6992fb5bc07271c999f439e0"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#gabea5613e6992fb5bc07271c999f439e0">eina_inlist_demote</a></div><div class="ttdeci">Eina_Inlist * eina_inlist_demote(Eina_Inlist *list, Eina_Inlist *item)</div><div class="ttdoc">Move existing node to end of list.</div><div class="ttdef"><b>Definition:</b> eina_inlist.c:395</div></div>
</div><!-- fragment --><p> Now let's use the <code>sort_cb</code> function declared above to sort our list:</p>
<div class="fragment"><div class="line">   list = <a class="code" href="group__Eina__Inline__List__Group.html#gac1132bfed4e77a5b63b0fb81d46f20c9">eina_inlist_sort</a>(list, sort_cb);</div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_gac1132bfed4e77a5b63b0fb81d46f20c9"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#gac1132bfed4e77a5b63b0fb81d46f20c9">eina_inlist_sort</a></div><div class="ttdeci">Eina_Inlist * eina_inlist_sort(Eina_Inlist *head, Eina_Compare_Cb func)</div><div class="ttdoc">Sort a list according to the ordering func will return.</div><div class="ttdef"><b>Definition:</b> eina_inlist.c:807</div></div>
</div><!-- fragment --><p> Removing an element from the inlist is also similar to <a class="el" href="group__Eina__List__Group.html#ga3295e1210efea1fb0fd6acbf3cbc1f29">Eina_List</a> :</p>
<div class="fragment"><div class="line">   list = <a class="code" href="group__Eina__Inline__List__Group.html#gad84d4a8ad4c3392df4be8278ce10a274">eina_inlist_remove</a>(list, <a class="code" href="group__Eina__Inline__List__Group.html#ga5bc991428e75557c6195f6b9e38321fb">EINA_INLIST_GET</a>(d));</div>
<div class="line">   free(d);</div>
<div class="ttc" id="agroup__Eina__Inline__List__Group_html_gad84d4a8ad4c3392df4be8278ce10a274"><div class="ttname"><a href="group__Eina__Inline__List__Group.html#gad84d4a8ad4c3392df4be8278ce10a274">eina_inlist_remove</a></div><div class="ttdeci">Eina_Inlist * eina_inlist_remove(Eina_Inlist *in_list, Eina_Inlist *in_item)</div><div class="ttdoc">Remove node from list.</div><div class="ttdef"><b>Definition:</b> eina_inlist.c:330</div></div>
</div><!-- fragment --><p> Another way of walking through the inlist.</p>
<div class="fragment"><div class="line">   <span class="keywordflow">for</span> (itr = list; itr != NULL; itr = itr-&gt;next)</div>
<div class="line">     {</div>
<div class="line">        cur = <a class="code" href="group__Eina__Inline__List__Group.html#ga8c4e6011e7caa9ec5c22b003c4950338">EINA_INLIST_CONTAINER_GET</a>(itr, <span class="keyword">struct</span> my_struct);</div>
<div class="line">        printf(<span class="stringliteral">&quot;\ta=%d, b=%d\n&quot;</span>, cur-&gt;a, cur-&gt;b);</div>
<div class="line">     }</div>
</div><!-- fragment --><p> Notice that in the previous piece of code, since we only have the pointers to the inlist nodes, we have to use the <a class="el" href="group__Eina__Inline__List__Group.html#ga8c4e6011e7caa9ec5c22b003c4950338">EINA_INLIST_CONTAINER_GET</a> macro that will return the pointer to the entire structure. Of course, in this case it is the same as the list pointer, since the <a class="el" href="group__Eina__Inline__List__Group.html#gab30a76fcfa50307c797491705d60136a">EINA_INLIST</a> macro was used in the beginning of the structure.</p>
<p>Now to finish this example, lets delete this list:</p>
<div class="fragment"><div class="line">   <span class="keywordflow">while</span> (list)</div>
<div class="line">     {</div>
<div class="line">        <span class="keyword">struct </span>my_struct *aux = <a class="code" href="group__Eina__Inline__List__Group.html#ga8c4e6011e7caa9ec5c22b003c4950338">EINA_INLIST_CONTAINER_GET</a>(list,</div>
<div class="line">                                                          <span class="keyword">struct</span> my_struct);</div>
<div class="line">        list = <a class="code" href="group__Eina__Inline__List__Group.html#gad84d4a8ad4c3392df4be8278ce10a274">eina_inlist_remove</a>(list, list);</div>
<div class="line">        free(aux);</div>
<div class="line">     }</div>
</div><!-- fragment --></div></div><!-- contents -->
</div><!-- PageDoc -->
 
 <div id="push"></div>
 </div> <!-- #content -->
  </div> <!-- .layout -->
 </div> <!-- #container -->
  <div id="footer">
    <table><tr>
      <td class="poweredby"><img src="doxygen.png"></td>
      <td>Samsung Electronics is supporting the EFL Documentation Project</td>
      <td class="copyright">Copyright &copy;2013 Enlightenment</td>
      <td class="generated">Docs generated Tue Nov 5 2013 19:12:59</td>
    </tr></table>
  </div>
</body>
</html>
